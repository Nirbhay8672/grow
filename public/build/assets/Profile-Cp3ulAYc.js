import{d as q,r as B,f,g as F,o as T,c as i,a as V,u as j,h as D,w as L,b as e,i as r,j as z,k as u,n as m,v as p,e as d,t as n,F as w,m as U,p as C,q as $,s as E,_ as I}from"./app-0JMNLgL9.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-B_cPmPuj.js";import{p as R}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const A={class:"row"},G={class:"col-12"},H={class:"card"},J={class:"card-body"},K={class:"row"},Q={class:"col-md-6 mb-3"},W={class:"form-group"},X={key:0,class:"invalid-feedback"},Y={class:"col-md-6 mb-3"},Z={class:"form-group"},ee={key:0,class:"invalid-feedback"},se={class:"col-md-6 mb-3"},ae={class:"form-group"},te={key:0,class:"invalid-feedback"},oe={class:"col-md-6 mb-3"},le={class:"form-group"},ie={key:0,class:"invalid-feedback"},de={class:"col-md-6 mb-3"},ne={class:"form-group"},re={key:0,class:"invalid-feedback"},me={class:"col-md-6 mb-3"},ue={class:"form-group"},ce={key:0,class:"invalid-feedback"},pe={class:"col-md-6 mb-3"},_e={class:"form-group"},ve={key:0,class:"invalid-feedback"},fe={class:"col-md-6 mb-3"},be={class:"form-group"},ye={key:0,class:"invalid-feedback"},we={class:"col-md-6 mb-3"},he={class:"form-group"},ge={key:0,class:"invalid-feedback"},ke={class:"col-md-6 mb-3"},xe={class:"form-group"},Ve=["value"],Ue={key:0,class:"invalid-feedback"},Ce={class:"col-md-6 mb-3"},Ee={class:"form-group"},Ne=["disabled"],Pe=["value"],Se={key:0,class:"form-text"},Me={key:1,class:"invalid-feedback"},qe={class:"col-md-6 mb-3"},Be={class:"form-group"},Fe={key:0,class:"invalid-feedback"},Te={class:"col-md-6 mb-3"},je={class:"form-group"},De={key:0,class:"invalid-feedback"},Le={class:"d-flex justify-content-end gap-2"},ze=["disabled"],$e={key:0,class:"spinner-border spinner-border-sm me-1"},Ie={class:"d-flex align-items-center"},Oe={class:"me-2",style:{"font-size":"18px"}},Re=q({__name:"Profile",props:{user:{},states:{}},setup(h){const l=h,N=[{title:"Profile",href:R().url}],t=B({name:l.user.name||"",username:l.user.username||"",first_name:l.user.first_name||"",middle_name:l.user.middle_name||"",last_name:l.user.last_name||"",mobile:l.user.mobile||"",email:l.user.email||"",company_name:l.user.company_name||"",birth_date:l.user.birth_date||"",state_id:l.user.state_id||"",city_id:l.user.city_id||"",password:"",password_confirmation:""}),b=f([]),y=f(!1),v=f(!1),a=f({}),_=f({show:!1,message:"",type:"success"}),g=F({get:()=>t.birth_date?typeof t.birth_date=="string"&&t.birth_date.match(/^\d{4}-\d{2}-\d{2}$/)?t.birth_date:typeof t.birth_date=="string"?t.birth_date.split("T")[0]:"":"",set:c=>{t.birth_date=c}}),k=async c=>{if(c){y.value=!0;try{const s=await E.get(`/states/${c}/cities`);b.value=s.data}catch(s){console.error("Error loading cities:",s),b.value=[]}finally{y.value=!1}}},P=async()=>{t.state_id?(await k(t.state_id),t.city_id=""):(b.value=[],t.city_id="")};T(async()=>{l.user.state_id&&await k(l.user.state_id)});const x=(c,s="success")=>{_.value={show:!0,message:c,type:s},setTimeout(()=>{_.value.show=!1},3e3)},S=async()=>{v.value=!0,a.value={};try{const c=await E.put("/profile",t);x("Profile updated successfully!"),Object.assign(l.user,c.data)}catch(c){c.response?.status===422?a.value=c.response.data.errors:x("Error updating profile. Please try again.","error")}finally{v.value=!1}},M=()=>{Object.assign(t,{name:l.user.name||"",username:l.user.username||"",first_name:l.user.first_name||"",middle_name:l.user.middle_name||"",last_name:l.user.last_name||"",mobile:l.user.mobile||"",email:l.user.email||"",company_name:l.user.company_name||"",birth_date:l.user.birth_date||"",state_id:l.user.state_id||"",city_id:l.user.city_id||"",password:"",password_confirmation:""}),a.value={}};return(c,s)=>(d(),i(w,null,[V(j(D),{title:"Profile"}),V(O,{breadcrumbs:N},{default:L(()=>[s[30]||(s[30]=e("div",{class:"row mt-4"},[e("div",{class:"col-12"},[e("h4",{class:"color-dark fw-500 mb-4"},"My Profile")])],-1)),e("div",A,[e("div",G,[e("div",H,[s[29]||(s[29]=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Profile Information")],-1)),e("div",J,[e("form",{onSubmit:z(S,["prevent"])},[e("div",K,[e("div",Q,[e("div",W,[s[14]||(s[14]=e("label",{for:"name",class:"form-label"},"Full Name",-1)),u(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>t.name=o),type:"text",class:m(["form-control",{"is-invalid":a.value.name}]),placeholder:"Enter full name",required:""},null,2),[[p,t.name]]),a.value.name?(d(),i("div",X,n(a.value.name[0]),1)):r("",!0)])]),e("div",Y,[e("div",Z,[s[15]||(s[15]=e("label",{for:"username",class:"form-label"},"Username",-1)),u(e("input",{id:"username","onUpdate:modelValue":s[1]||(s[1]=o=>t.username=o),type:"text",class:m(["form-control",{"is-invalid":a.value.username}]),placeholder:"Enter username",required:""},null,2),[[p,t.username]]),a.value.username?(d(),i("div",ee,n(a.value.username[0]),1)):r("",!0)])]),e("div",se,[e("div",ae,[s[16]||(s[16]=e("label",{for:"first_name",class:"form-label"},"First Name",-1)),u(e("input",{id:"first_name","onUpdate:modelValue":s[2]||(s[2]=o=>t.first_name=o),type:"text",class:m(["form-control",{"is-invalid":a.value.first_name}]),placeholder:"Enter first name",required:""},null,2),[[p,t.first_name]]),a.value.first_name?(d(),i("div",te,n(a.value.first_name[0]),1)):r("",!0)])]),e("div",oe,[e("div",le,[s[17]||(s[17]=e("label",{for:"last_name",class:"form-label"},"Last Name",-1)),u(e("input",{id:"last_name","onUpdate:modelValue":s[3]||(s[3]=o=>t.last_name=o),type:"text",class:m(["form-control",{"is-invalid":a.value.last_name}]),placeholder:"Enter last name",required:""},null,2),[[p,t.last_name]]),a.value.last_name?(d(),i("div",ie,n(a.value.last_name[0]),1)):r("",!0)])]),e("div",de,[e("div",ne,[s[18]||(s[18]=e("label",{for:"middle_name",class:"form-label"},"Middle Name",-1)),u(e("input",{id:"middle_name","onUpdate:modelValue":s[4]||(s[4]=o=>t.middle_name=o),type:"text",class:m(["form-control",{"is-invalid":a.value.middle_name}]),placeholder:"Enter middle name (optional)"},null,2),[[p,t.middle_name]]),a.value.middle_name?(d(),i("div",re,n(a.value.middle_name[0]),1)):r("",!0)])]),e("div",me,[e("div",ue,[s[19]||(s[19]=e("label",{for:"email",class:"form-label"},"Email",-1)),u(e("input",{id:"email","onUpdate:modelValue":s[5]||(s[5]=o=>t.email=o),type:"email",class:m(["form-control",{"is-invalid":a.value.email}]),placeholder:"Enter email",onInput:s[6]||(s[6]=o=>t.email=o.target.value.toLowerCase()),required:""},null,34),[[p,t.email]]),a.value.email?(d(),i("div",ce,n(a.value.email[0]),1)):r("",!0)])]),e("div",pe,[e("div",_e,[s[20]||(s[20]=e("label",{for:"mobile",class:"form-label"},"Mobile",-1)),u(e("input",{id:"mobile","onUpdate:modelValue":s[7]||(s[7]=o=>t.mobile=o),type:"text",class:m(["form-control",{"is-invalid":a.value.mobile}]),placeholder:"Enter mobile number (optional)"},null,2),[[p,t.mobile]]),a.value.mobile?(d(),i("div",ve,n(a.value.mobile[0]),1)):r("",!0)])]),e("div",fe,[e("div",be,[s[21]||(s[21]=e("label",{for:"company_name",class:"form-label"},"Company Name",-1)),u(e("input",{id:"company_name","onUpdate:modelValue":s[8]||(s[8]=o=>t.company_name=o),type:"text",class:m(["form-control",{"is-invalid":a.value.company_name}]),placeholder:"Enter company name (optional)"},null,2),[[p,t.company_name]]),a.value.company_name?(d(),i("div",ye,n(a.value.company_name[0]),1)):r("",!0)])]),e("div",we,[e("div",he,[s[22]||(s[22]=e("label",{for:"birth_date",class:"form-label"},"Birth Date",-1)),u(e("input",{id:"birth_date","onUpdate:modelValue":s[9]||(s[9]=o=>g.value=o),type:"date",class:m(["form-control",{"is-invalid":a.value.birth_date}])},null,2),[[p,g.value]]),a.value.birth_date?(d(),i("div",ge,n(a.value.birth_date[0]),1)):r("",!0)])]),e("div",ke,[e("div",xe,[s[24]||(s[24]=e("label",{for:"state_id",class:"form-label"},"State",-1)),u(e("select",{id:"state_id","onUpdate:modelValue":s[10]||(s[10]=o=>t.state_id=o),class:m(["form-control",{"is-invalid":a.value.state_id}]),onChange:P},[s[23]||(s[23]=e("option",{value:""},"Select a state",-1)),(d(!0),i(w,null,U(h.states,o=>(d(),i("option",{key:o.id,value:o.id},n(o.name)+" ("+n(o.code)+") ",9,Ve))),128))],34),[[C,t.state_id]]),a.value.state_id?(d(),i("div",Ue,n(a.value.state_id[0]),1)):r("",!0)])]),e("div",Ce,[e("div",Ee,[s[26]||(s[26]=e("label",{for:"city_id",class:"form-label"},"City",-1)),u(e("select",{id:"city_id","onUpdate:modelValue":s[11]||(s[11]=o=>t.city_id=o),class:m(["form-control",{"is-invalid":a.value.city_id}]),disabled:!t.state_id||y.value},[s[25]||(s[25]=e("option",{value:""},"Select a city",-1)),(d(!0),i(w,null,U(b.value,o=>(d(),i("option",{key:o.id,value:o.id},n(o.name),9,Pe))),128))],10,Ne),[[C,t.city_id]]),y.value?(d(),i("div",Se,"Loading cities...")):r("",!0),a.value.city_id?(d(),i("div",Me,n(a.value.city_id[0]),1)):r("",!0)])]),e("div",qe,[e("div",Be,[s[27]||(s[27]=e("label",{for:"password",class:"form-label"},"New Password",-1)),u(e("input",{id:"password","onUpdate:modelValue":s[12]||(s[12]=o=>t.password=o),type:"password",class:m(["form-control",{"is-invalid":a.value.password}]),placeholder:"Enter new password (optional)"},null,2),[[p,t.password]]),a.value.password?(d(),i("div",Fe,n(a.value.password[0]),1)):r("",!0)])]),e("div",Te,[e("div",je,[s[28]||(s[28]=e("label",{for:"password_confirmation",class:"form-label"},"Confirm New Password",-1)),u(e("input",{id:"password_confirmation","onUpdate:modelValue":s[13]||(s[13]=o=>t.password_confirmation=o),type:"password",class:m(["form-control",{"is-invalid":a.value.password_confirmation}]),placeholder:"Confirm new password"},null,2),[[p,t.password_confirmation]]),a.value.password_confirmation?(d(),i("div",De,n(a.value.password_confirmation[0]),1)):r("",!0)])])]),e("div",Le,[e("button",{type:"button",class:"btn btn-secondary",onClick:M}," Reset "),e("button",{type:"submit",class:"btn btn-primary",disabled:v.value},[v.value?(d(),i("span",$e)):r("",!0),$(" "+n(v.value?"Updating...":"Update Profile"),1)],8,ze)])],32)])])])]),_.value.show?(d(),i("div",{key:0,class:m(["toast-notification",_.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[e("div",Ie,[e("span",Oe,n(_.value.type==="success"?"✅":"❌"),1),e("span",null,n(_.value.message),1)])],2)):r("",!0)]),_:1})],64))}}),Ke=I(Re,[["__scopeId","data-v-b6b4e0f1"]]);export{Ke as default};
