import{d as oe,g as j,r as v,f as se,O as R,s as F,o as le,n as T,c as C,a as S,u as ne,h as ce,w as de,b as u,i as A,t as q,k as ue,e as m,j as pe,z,K as fe,m as ge,F as me,x as be,_ as he}from"./app-Dto5FeMA.js";import{_ as ye}from"./AppLayout.vue_vue_type_script_setup_true_lang-BhHeXh4H.js";import{_ as we}from"./StepIndicator.vue_vue_type_script_setup_true_lang-DK4O5Srs.js";import{_ as ve}from"./BuilderInformation.vue_vue_type_script_setup_true_lang-CqhQnfUs.js";import{_ as $e}from"./ProjectInformation.vue_vue_type_script_setup_true_lang-Clv02ak8.js";import{_ as ke}from"./ContactDetails.vue_vue_type_script_setup_true_lang-Caeq02li.js";import{_ as Se}from"./ChoiseSelection.vue_vue_type_script_setup_true_lang-DOBk9pkv.js";import{_ as je}from"./TowerDetailsSection.vue_vue_type_script_setup_true_lang-B6aqTmHo.js";import Ce from"./ParkingAndAmenities-Dgzzo2tA.js";import{_ as ze}from"./RetailForm.vue_vue_type_script_setup_true_lang-DSLKf-RL.js";import{_ as Ee}from"./Category3Form.vue_vue_type_script_setup_true_lang-CO_n0yeZ.js";import{_ as Pe}from"./Category4Form.vue_vue_type_script_setup_true_lang-DpIaM4kQ.js";import{_ as Te}from"./Category5Form.vue_vue_type_script_setup_true_lang-DDhtLdGC.js";import{_ as Ae}from"./Category6Form.vue_vue_type_script_setup_true_lang-ZFBLnBlX.js";import{_ as Ue}from"./OfficeRetailForm.vue_vue_type_script_setup_true_lang-LdTsbnSs.js";import"./plus-BRsFxOZa.js";import"./createLucideIcon-BjDovJkT.js";import"./x-CTP0MOYo.js";const De={class:"row"},Ne={class:"col-12"},Re={class:"card mb-4 mt-4"},Fe={class:"card-header color-dark fw-500"},Ie={class:"mb-0"},Le={class:"card-body"},Oe={key:0,class:"d-flex flex-column align-items-center justify-content-center",style:{"min-height":"400px"}},qe={class:"row"},Ve={class:"col-md-3 col-lg-2"},Be={class:"col-md-9 col-lg-10"},Me={key:0},We={key:1},Je={key:2},Ke={class:"d-flex justify-content-end gap-2 mt-4"},Ge=["disabled"],He={class:"d-flex align-items-center"},Qe={class:"me-2",style:{"font-size":"18px"}},Xe=oe({__name:"CreateProject",props:{project:{},builders:{},states:{},measurementUnits:{},restrictedUserOptions:{},constructionTypes:{},amenities:{}},setup(p){const b=p,h=j(()=>!!b.project),G=j(()=>[{title:"Dashboard",href:"/dashboard"},{title:h.value?"Edit Project":"Create Project",href:h.value?`/projects/${b.project?.id}/edit`:"/projects/create"}]),f=v(1),U=v(!1),l=v({}),D=v([]),$=v([]),I=v(!1),L=v(!1),E=v({show:!1,message:"",type:"success"}),k=v([{id:1,name:"",mobile:"",email:"",designation:""}]);let M=2;const a=se({builder_id:"",builder_website:"",project_name:"",address:"",state_id:"",city_id:"",locality_id:"",pincode:"",location_link:"",land_size:"",measurement_unit_id:"",rera_no:"",project_status:"",restricted_user_ids:[],construction_type_id:"",category_id:"",sub_category_id:"",no_of_towers:"",no_of_floors:"",total_units:"",no_of_unit_each_tower:"",no_of_lift:"",front_road_width:"",front_road_width_measurement_unit_id:"",washroom:"Private",two_road_corner:!1,towers_different_specification:!1,retail_unit_details:[],category3_unit_details:[],dynamic_facilities:[],utility_board:{pollution_control_board:{checked:!1,value:""},ec:{checked:!1,value:""},gas:{checked:!1,value:""},power:{checked:!1,value:""},water:{checked:!1,value:""}},category4_tower_details:[],category4_unit_details:[],category4_total_room:"",category5_tower_details:[],category5_unit_details:[],category5_total_room:"",category6_data:{total_open_area:"",total_open_area_unit_id:"",total_no_of_plots:"",project_with_multiple_theme_phase:!1,phase_name:"",plots_with_construction:!1,saleable_plot_from:"",saleable_plot_to:"",saleable_plot_unit_id:"",show_carpet_plot_size:!1,carpet_plot_from:"",carpet_plot_to:"",carpet_plot_unit_id:"",constructed_saleable_area_from:"",constructed_saleable_area_to:"",constructed_saleable_area_unit_id:""},office_retail_data:{office_sub_category_id:"",no_of_towers:"",no_of_floors:"",no_of_unit_each_tower:"",no_of_lift:"",front_road_width:"",front_road_width_unit_id:"",washroom:"Private",two_road_corner:!1,tower_name:"",total_units:"",saleable_from:"",saleable_to:"",saleable_unit_id:"",show_carpet_area:!1,carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",show_builtup_area:!1,builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:""},office_retail_retail_unit_details:[],tower_details:[{tower_name:"",saleable_area_from:"",saleable_area_to:"",saleable_area_unit_id:"",ceiling_height:"",ceiling_height_unit_id:"",carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:"",show_carpet_area:!1,show_builtup_area:!1}],free_allotted_parking_four_wheeler:!1,free_allotted_parking_two_wheeler:!1,available_for_purchase:!1,no_of_parking:"",total_floor_for_parking:"1",basement_parking:[{floor_no:"",ev_charging_point:"",hydraulic_parking:"",height_of_basement:"",height_of_basement_unit_id:""}],amenity_ids:[],document_uploads:[],brochure_file:null,existing_brochure_file:null,brochure_deleted:!1,remark:""}),P=(e,r="success")=>{E.value={show:!0,message:e,type:r},setTimeout(()=>{E.value.show=!1},3e3)},H=()=>{k.value.push({id:M++,name:"",mobile:"",email:"",designation:""})},Q=e=>{k.value.length>1&&(k.value=k.value.filter(r=>r.id!==e))};R(()=>a.no_of_towers,e=>{if(!a.towers_different_specification)return;const r=parseInt(e)||1,o=a.tower_details.length;if(r>o)for(let t=o;t<r;t++)a.tower_details.push({tower_name:"",saleable_area_from:"",saleable_area_to:"",saleable_area_unit_id:"",ceiling_height:"",ceiling_height_unit_id:"",carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:"",show_carpet_area:!1,show_builtup_area:!1});else r<o&&r>0&&(a.tower_details=a.tower_details.slice(0,r));(r===0||!e)&&a.tower_details.length===0&&a.tower_details.push({tower_name:"",saleable_area_from:"",saleable_area_to:"",saleable_area_unit_id:"",ceiling_height:"",ceiling_height_unit_id:"",carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:"",show_carpet_area:!1,show_builtup_area:!1})},{immediate:!1}),R(()=>a.towers_different_specification,e=>{if(!e)a.tower_details.length>1&&(a.tower_details=[a.tower_details[0]]);else{const r=parseInt(a.no_of_towers)||1,o=a.tower_details.length;if(r>o)for(let t=o;t<r;t++)a.tower_details.push({tower_name:"",saleable_area_from:"",saleable_area_to:"",saleable_area_unit_id:"",ceiling_height:"",ceiling_height_unit_id:"",carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:"",show_carpet_area:!1,show_builtup_area:!1});else r<o&&r>0&&(a.tower_details=a.tower_details.slice(0,r));a.tower_details.length===0&&a.tower_details.push({tower_name:"",saleable_area_from:"",saleable_area_to:"",saleable_area_unit_id:"",ceiling_height:"",ceiling_height_unit_id:"",carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:"",show_carpet_area:!1,show_builtup_area:!1})}},{immediate:!1}),R(()=>a.state_id,async e=>{if(!I.value)if(e)try{const r=await F.get(`/states/${e}/cities`);D.value=r.data,a.city_id="",a.locality_id="",a.pincode="",$.value=[]}catch(r){console.error("Error loading cities:",r),D.value=[]}else D.value=[],a.city_id="",a.locality_id="",a.pincode="",$.value=[]}),R(()=>a.city_id,async e=>{if(!I.value)if(e)try{const r=await F.get(`/cities/${e}/localities`);$.value=r.data,a.locality_id="",a.pincode=""}catch(r){console.error("Error loading localities:",r),$.value=[]}else $.value=[],a.locality_id="",a.pincode=""}),R(()=>a.locality_id,e=>{if(e){const r=$.value.find(o=>o.id===Number(e));r&&r.zip_code&&(a.pincode=r.zip_code)}else a.pincode=""});const N=()=>{l.value={};let e=!0;if((!a.builder_id||a.builder_id==="")&&(l.value.builder_id=["Builder Name is required"],e=!1),(!a.project_name||a.project_name.trim()==="")&&(l.value.project_name=["Project Name is required"],e=!1),(!a.locality_id||a.locality_id==="")&&(l.value.locality_id=["Locality is required"],e=!1),k.value.forEach((r,o)=>{(!r.name||r.name.trim()==="")&&(l.value[`contacts.${o}.name`]||(l.value[`contacts.${o}.name`]=[]),l.value[`contacts.${o}.name`].push("Name is required"),e=!1),(!r.mobile||r.mobile.trim()==="")&&(l.value[`contacts.${o}.mobile`]||(l.value[`contacts.${o}.mobile`]=[]),l.value[`contacts.${o}.mobile`].push("Mobile is required"),e=!1),r.mobile&&r.mobile.trim()!==""&&(/^[0-9]{10}$/.test(r.mobile.trim())||(l.value[`contacts.${o}.mobile`]||(l.value[`contacts.${o}.mobile`]=[]),l.value[`contacts.${o}.mobile`].push("Mobile must be 10 digits"),e=!1)),r.email&&r.email.trim()!==""&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email.trim())||(l.value[`contacts.${o}.email`]||(l.value[`contacts.${o}.email`]=[]),l.value[`contacts.${o}.email`].push("Please enter a valid email address"),e=!1))}),a.builder_website&&a.builder_website.trim()!=="")try{new URL(a.builder_website)}catch{l.value.builder_website=["Please enter a valid URL"],e=!1}if(a.location_link&&a.location_link.trim()!=="")try{new URL(a.location_link)}catch{l.value.location_link=["Please enter a valid URL"],e=!1}return e},X=()=>{const e=Object.keys(l.value);if(e.length===0)return 1;const r=["builder_id","builder_website","project_name","address","state_id","city_id","locality_id","pincode","location_link","land_size","measurement_unit_id","rera_no","project_status","restricted_user_ids"],o=["construction_type_id","category_id","sub_category_id","sub_category_ids","no_of_towers","no_of_floors","total_units","no_of_unit_each_tower","no_of_lift","front_road_width","front_road_width_measurement_unit_id","washroom","two_road_corner","retail_unit_details","tower_details"],t=["free_allotted_parking_four_wheeler","free_allotted_parking_two_wheeler","available_for_purchase","no_of_parking","total_floor_for_parking","basement_parking","amenities","documents","remark","brochure_file"],i=e.some(s=>s.startsWith("contacts.")),g=e[0];return r.includes(g)||i?1:o.includes(g)||e.some(s=>s.startsWith("tower_details.")||s.startsWith("retail_unit_details."))?2:t.includes(g)||e.some(s=>s.startsWith("basement_parking.")||s.startsWith("documents."))?3:1},W=()=>{const e=X();f.value=e,setTimeout(()=>{const r=document.querySelector(".is-invalid");r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100)},J=async()=>{if(U.value=!0,l.value={},!N()){U.value=!1,P("Please fix the validation errors before submitting.","error"),W();return}try{const e=new FormData;if(e.append("builder_id",a.builder_id),a.builder_website&&e.append("builder_website",a.builder_website),e.append("project_name",a.project_name),a.address&&e.append("address",a.address),a.state_id&&e.append("state_id",a.state_id),a.city_id&&e.append("city_id",a.city_id),e.append("locality_id",a.locality_id),a.pincode&&e.append("pincode",a.pincode),a.location_link&&e.append("location_link",a.location_link),a.land_size&&e.append("land_size",a.land_size),a.measurement_unit_id&&e.append("measurement_unit_id",a.measurement_unit_id),a.rera_no&&e.append("rera_no",a.rera_no),a.project_status&&e.append("project_status",a.project_status),a.restricted_user_ids&&a.restricted_user_ids.length>0&&a.restricted_user_ids.forEach(t=>{e.append("restricted_user_ids[]",String(t))}),k.value.forEach((t,i)=>{e.append(`contacts[${i}][name]`,t.name),e.append(`contacts[${i}][mobile]`,t.mobile),t.email&&e.append(`contacts[${i}][email]`,t.email),t.designation&&e.append(`contacts[${i}][designation]`,t.designation)}),e.append("construction_type_id",a.construction_type_id),a.construction_type_id==="3"){const t=a.category_id||"1";e.append("category_id",t)}else e.append("category_id",a.category_id);if(a.construction_type_id==="3"){const t=a.office_retail_data;if(t&&t.office_sub_category_id&&e.append("sub_category_id",t.office_sub_category_id),Array.isArray(a.sub_category_id)&&a.sub_category_id.length>0){const i=V.value.map(s=>String(s.id));a.sub_category_id.filter(s=>i.includes(String(s))).forEach(s=>{e.append("sub_category_ids[]",s)})}}else a.sub_category_id&&(Array.isArray(a.sub_category_id)?a.sub_category_id.forEach(t=>{e.append("sub_category_ids[]",t)}):e.append("sub_category_id",a.sub_category_id));if(a.no_of_towers&&e.append("no_of_towers",a.no_of_towers),a.no_of_floors&&e.append("no_of_floors",a.no_of_floors),a.total_units&&e.append("total_units",a.total_units),a.no_of_unit_each_tower&&e.append("no_of_unit_each_tower",a.no_of_unit_each_tower),a.no_of_lift&&e.append("no_of_lift",a.no_of_lift),a.front_road_width&&e.append("front_road_width",a.front_road_width),a.front_road_width_measurement_unit_id&&e.append("front_road_width_measurement_unit_id",a.front_road_width_measurement_unit_id),a.washroom&&e.append("washroom",a.washroom),e.append("two_road_corner",a.two_road_corner?"1":"0"),e.append("towers_different_specification",a.towers_different_specification?"1":"0"),a.category_id==="2"&&a.retail_unit_details&&a.retail_unit_details.length>0&&a.retail_unit_details.forEach((t,i)=>{t.tower_name&&e.append(`retail_unit_details[${i}][tower_name]`,t.tower_name),t.sub_category_id&&e.append(`retail_unit_details[${i}][sub_category_id]`,t.sub_category_id),t.size_from&&e.append(`retail_unit_details[${i}][size_from]`,t.size_from),t.size_to&&e.append(`retail_unit_details[${i}][size_to]`,t.size_to),t.size_unit_id&&e.append(`retail_unit_details[${i}][size_unit_id]`,t.size_unit_id),t.front_opening&&e.append(`retail_unit_details[${i}][front_opening]`,t.front_opening),t.front_opening_unit_id&&e.append(`retail_unit_details[${i}][front_opening_unit_id]`,t.front_opening_unit_id),t.no_of_unit_each_floor&&e.append(`retail_unit_details[${i}][no_of_unit_each_floor]`,t.no_of_unit_each_floor),t.ceiling_height&&e.append(`retail_unit_details[${i}][ceiling_height]`,t.ceiling_height),t.ceiling_height_unit_id&&e.append(`retail_unit_details[${i}][ceiling_height_unit_id]`,t.ceiling_height_unit_id)}),a.construction_type_id==="1"&&a.category_id==="3"&&(a.category3_unit_details&&a.category3_unit_details.length>0&&a.category3_unit_details.forEach((t,i)=>{t.plot_area_from&&e.append(`category3_unit_details[${i}][plot_area_from]`,t.plot_area_from),t.plot_area_to&&e.append(`category3_unit_details[${i}][plot_area_to]`,t.plot_area_to),t.plot_area_unit_id&&e.append(`category3_unit_details[${i}][plot_area_unit_id]`,t.plot_area_unit_id),t.constructed_area_from&&e.append(`category3_unit_details[${i}][constructed_area_from]`,t.constructed_area_from),t.constructed_area_to&&e.append(`category3_unit_details[${i}][constructed_area_to]`,t.constructed_area_to),t.constructed_area_unit_id&&e.append(`category3_unit_details[${i}][constructed_area_unit_id]`,t.constructed_area_unit_id),t.road_width_from&&e.append(`category3_unit_details[${i}][road_width_from]`,t.road_width_from),t.road_width_to&&e.append(`category3_unit_details[${i}][road_width_to]`,t.road_width_to),t.road_width_unit_id&&e.append(`category3_unit_details[${i}][road_width_unit_id]`,t.road_width_unit_id),t.ceiling_height&&e.append(`category3_unit_details[${i}][ceiling_height]`,t.ceiling_height),t.ceiling_height_unit_id&&e.append(`category3_unit_details[${i}][ceiling_height_unit_id]`,t.ceiling_height_unit_id),t.total_no_of_units&&e.append(`category3_unit_details[${i}][total_no_of_units]`,t.total_no_of_units)}),a.dynamic_facilities&&a.dynamic_facilities.length>0&&a.dynamic_facilities.forEach((t,i)=>{e.append(`dynamic_facilities[${i}][label]`,t.label),e.append(`dynamic_facilities[${i}][checked]`,t.checked?"1":"0"),t.value&&e.append(`dynamic_facilities[${i}][value]`,t.value)}),a.utility_board&&(e.append("utility_board[pollution_control_board][checked]",a.utility_board.pollution_control_board.checked?"1":"0"),a.utility_board.pollution_control_board.value&&e.append("utility_board[pollution_control_board][value]",a.utility_board.pollution_control_board.value),e.append("utility_board[ec][checked]",a.utility_board.ec.checked?"1":"0"),a.utility_board.ec.value&&e.append("utility_board[ec][value]",a.utility_board.ec.value),e.append("utility_board[gas][checked]",a.utility_board.gas.checked?"1":"0"),a.utility_board.gas.value&&e.append("utility_board[gas][value]",a.utility_board.gas.value),e.append("utility_board[power][checked]",a.utility_board.power.checked?"1":"0"),a.utility_board.power.value&&e.append("utility_board[power][value]",a.utility_board.power.value),e.append("utility_board[water][checked]",a.utility_board.water.checked?"1":"0"),a.utility_board.water.value&&e.append("utility_board[water][value]",a.utility_board.water.value))),a.construction_type_id==="2"&&(a.category_id==="4"||a.category_id==="7")&&(a.category4_tower_details&&a.category4_tower_details.length>0&&a.category4_tower_details.forEach((t,i)=>{t.tower_name&&e.append(`category4_tower_details[${i}][tower_name]`,t.tower_name),t.total_units&&e.append(`category4_tower_details[${i}][total_units]`,t.total_units),t.total_floor&&e.append(`category4_tower_details[${i}][total_floor]`,t.total_floor),t.sub_category_ids&&t.sub_category_ids.length>0&&t.sub_category_ids.forEach(g=>{e.append(`category4_tower_details[${i}][sub_category_ids][]`,g)})}),a.category4_unit_details&&a.category4_unit_details.length>0&&a.category4_unit_details.forEach((t,i)=>{t.tower_name&&e.append(`category4_unit_details[${i}][tower_name]`,t.tower_name),t.saleable_from&&e.append(`category4_unit_details[${i}][saleable_from]`,t.saleable_from),t.saleable_to&&e.append(`category4_unit_details[${i}][saleable_to]`,t.saleable_to),t.saleable_unit_id&&e.append(`category4_unit_details[${i}][saleable_unit_id]`,t.saleable_unit_id),t.wash_area&&e.append(`category4_unit_details[${i}][wash_area]`,t.wash_area),t.wash_area_unit_id&&e.append(`category4_unit_details[${i}][wash_area_unit_id]`,t.wash_area_unit_id),t.balcony_area&&e.append(`category4_unit_details[${i}][balcony_area]`,t.balcony_area),t.balcony_area_unit_id&&e.append(`category4_unit_details[${i}][balcony_area_unit_id]`,t.balcony_area_unit_id),t.ceiling_height&&e.append(`category4_unit_details[${i}][ceiling_height]`,t.ceiling_height),t.ceiling_height_unit_id&&e.append(`category4_unit_details[${i}][ceiling_height_unit_id]`,t.ceiling_height_unit_id),e.append(`category4_unit_details[${i}][servant_room]`,t.servant_room?"1":"0"),e.append(`category4_unit_details[${i}][show_carpet_area]`,t.show_carpet_area?"1":"0"),t.carpet_area_from&&e.append(`category4_unit_details[${i}][carpet_area_from]`,t.carpet_area_from),t.carpet_area_to&&e.append(`category4_unit_details[${i}][carpet_area_to]`,t.carpet_area_to),t.carpet_area_unit_id&&e.append(`category4_unit_details[${i}][carpet_area_unit_id]`,t.carpet_area_unit_id),e.append(`category4_unit_details[${i}][show_builtup_area]`,t.show_builtup_area?"1":"0"),t.builtup_area_from&&e.append(`category4_unit_details[${i}][builtup_area_from]`,t.builtup_area_from),t.builtup_area_to&&e.append(`category4_unit_details[${i}][builtup_area_to]`,t.builtup_area_to),t.builtup_area_unit_id&&e.append(`category4_unit_details[${i}][builtup_area_unit_id]`,t.builtup_area_unit_id)}),a.category4_total_room&&e.append("category4_total_room",a.category4_total_room)),a.construction_type_id==="2"&&a.category_id==="5"&&(a.category5_tower_details&&a.category5_tower_details.length>0&&a.category5_tower_details.forEach((t,i)=>{t.tower_name&&e.append(`category5_tower_details[${i}][tower_name]`,t.tower_name),t.total_units&&e.append(`category5_tower_details[${i}][total_units]`,t.total_units),t.total_floor&&e.append(`category5_tower_details[${i}][total_floor]`,t.total_floor),t.sub_category_ids&&t.sub_category_ids.length>0&&t.sub_category_ids.forEach(g=>{e.append(`category5_tower_details[${i}][sub_category_ids][]`,g)})}),a.category5_unit_details&&a.category5_unit_details.length>0&&a.category5_unit_details.forEach((t,i)=>{t.tower_name&&e.append(`category5_unit_details[${i}][tower_name]`,t.tower_name),t.saleable_from&&e.append(`category5_unit_details[${i}][saleable_from]`,t.saleable_from),t.saleable_to&&e.append(`category5_unit_details[${i}][saleable_to]`,t.saleable_to),t.saleable_unit_id&&e.append(`category5_unit_details[${i}][saleable_unit_id]`,t.saleable_unit_id),t.wash_area&&e.append(`category5_unit_details[${i}][wash_area]`,t.wash_area),t.wash_area_unit_id&&e.append(`category5_unit_details[${i}][wash_area_unit_id]`,t.wash_area_unit_id),t.balcony_area&&e.append(`category5_unit_details[${i}][balcony_area]`,t.balcony_area),t.balcony_area_unit_id&&e.append(`category5_unit_details[${i}][balcony_area_unit_id]`,t.balcony_area_unit_id),t.ceiling_height&&e.append(`category5_unit_details[${i}][ceiling_height]`,t.ceiling_height),t.ceiling_height_unit_id&&e.append(`category5_unit_details[${i}][ceiling_height_unit_id]`,t.ceiling_height_unit_id),e.append(`category5_unit_details[${i}][servant_room]`,t.servant_room?"1":"0"),e.append(`category5_unit_details[${i}][show_carpet_area]`,t.show_carpet_area?"1":"0"),t.carpet_area_from&&e.append(`category5_unit_details[${i}][carpet_area_from]`,t.carpet_area_from),t.carpet_area_to&&e.append(`category5_unit_details[${i}][carpet_area_to]`,t.carpet_area_to),t.carpet_area_unit_id&&e.append(`category5_unit_details[${i}][carpet_area_unit_id]`,t.carpet_area_unit_id),e.append(`category5_unit_details[${i}][show_builtup_area]`,t.show_builtup_area?"1":"0"),t.builtup_area_from&&e.append(`category5_unit_details[${i}][builtup_area_from]`,t.builtup_area_from),t.builtup_area_to&&e.append(`category5_unit_details[${i}][builtup_area_to]`,t.builtup_area_to),t.builtup_area_unit_id&&e.append(`category5_unit_details[${i}][builtup_area_unit_id]`,t.builtup_area_unit_id)}),a.category5_total_room&&e.append("category5_total_room",a.category5_total_room)),a.construction_type_id==="2"&&a.category_id==="6"&&a.category6_data){const t=a.category6_data;t.total_open_area&&e.append("category6_data[total_open_area]",t.total_open_area),t.total_open_area_unit_id&&e.append("category6_data[total_open_area_unit_id]",t.total_open_area_unit_id),t.total_no_of_plots&&e.append("category6_data[total_no_of_plots]",t.total_no_of_plots),e.append("category6_data[project_with_multiple_theme_phase]",t.project_with_multiple_theme_phase?"1":"0"),t.phase_name&&e.append("category6_data[phase_name]",t.phase_name),e.append("category6_data[plots_with_construction]",t.plots_with_construction?"1":"0"),t.saleable_plot_from&&e.append("category6_data[saleable_plot_from]",t.saleable_plot_from),t.saleable_plot_to&&e.append("category6_data[saleable_plot_to]",t.saleable_plot_to),t.saleable_plot_unit_id&&e.append("category6_data[saleable_plot_unit_id]",t.saleable_plot_unit_id),e.append("category6_data[show_carpet_plot_size]",t.show_carpet_plot_size?"1":"0"),t.carpet_plot_from&&e.append("category6_data[carpet_plot_from]",t.carpet_plot_from),t.carpet_plot_to&&e.append("category6_data[carpet_plot_to]",t.carpet_plot_to),t.carpet_plot_unit_id&&e.append("category6_data[carpet_plot_unit_id]",t.carpet_plot_unit_id),t.constructed_saleable_area_from&&e.append("category6_data[constructed_saleable_area_from]",t.constructed_saleable_area_from),t.constructed_saleable_area_to&&e.append("category6_data[constructed_saleable_area_to]",t.constructed_saleable_area_to),t.constructed_saleable_area_unit_id&&e.append("category6_data[constructed_saleable_area_unit_id]",t.constructed_saleable_area_unit_id)}if(a.construction_type_id==="3"&&a.office_retail_data){const t=a.office_retail_data;t.office_sub_category_id&&e.append("office_retail_data[office_sub_category_id]",t.office_sub_category_id),t.no_of_towers&&e.append("office_retail_data[no_of_towers]",t.no_of_towers),t.no_of_floors&&e.append("office_retail_data[no_of_floors]",t.no_of_floors),t.no_of_unit_each_tower&&e.append("office_retail_data[no_of_unit_each_tower]",t.no_of_unit_each_tower),t.no_of_lift&&e.append("office_retail_data[no_of_lift]",t.no_of_lift),t.front_road_width&&e.append("office_retail_data[front_road_width]",t.front_road_width),t.front_road_width_unit_id&&e.append("office_retail_data[front_road_width_unit_id]",t.front_road_width_unit_id),t.washroom&&e.append("office_retail_data[washroom]",t.washroom),e.append("office_retail_data[two_road_corner]",t.two_road_corner?"1":"0"),t.tower_name&&e.append("office_retail_data[tower_name]",t.tower_name),t.total_units&&e.append("office_retail_data[total_units]",t.total_units),t.saleable_from&&e.append("office_retail_data[saleable_from]",t.saleable_from),t.saleable_to&&e.append("office_retail_data[saleable_to]",t.saleable_to),t.saleable_unit_id&&e.append("office_retail_data[saleable_unit_id]",t.saleable_unit_id),e.append("office_retail_data[show_carpet_area]",t.show_carpet_area?"1":"0"),t.carpet_area_from&&e.append("office_retail_data[carpet_area_from]",t.carpet_area_from),t.carpet_area_to&&e.append("office_retail_data[carpet_area_to]",t.carpet_area_to),t.carpet_area_unit_id&&e.append("office_retail_data[carpet_area_unit_id]",t.carpet_area_unit_id),e.append("office_retail_data[show_builtup_area]",t.show_builtup_area?"1":"0"),t.builtup_area_from&&e.append("office_retail_data[builtup_area_from]",t.builtup_area_from),t.builtup_area_to&&e.append("office_retail_data[builtup_area_to]",t.builtup_area_to),t.builtup_area_unit_id&&e.append("office_retail_data[builtup_area_unit_id]",t.builtup_area_unit_id)}a.construction_type_id==="3"&&a.office_retail_retail_unit_details&&a.office_retail_retail_unit_details.length>0&&a.office_retail_retail_unit_details.forEach((t,i)=>{t.tower_name&&e.append(`office_retail_retail_unit_details[${i}][tower_name]`,t.tower_name),t.sub_category_id&&e.append(`office_retail_retail_unit_details[${i}][sub_category_id]`,t.sub_category_id),t.size_from&&e.append(`office_retail_retail_unit_details[${i}][size_from]`,t.size_from),t.size_to&&e.append(`office_retail_retail_unit_details[${i}][size_to]`,t.size_to),t.size_unit_id&&e.append(`office_retail_retail_unit_details[${i}][size_unit_id]`,t.size_unit_id),t.front_opening&&e.append(`office_retail_retail_unit_details[${i}][front_opening]`,t.front_opening),t.front_opening_unit_id&&e.append(`office_retail_retail_unit_details[${i}][front_opening_unit_id]`,t.front_opening_unit_id),t.no_of_unit_each_floor&&e.append(`office_retail_retail_unit_details[${i}][no_of_unit_each_floor]`,t.no_of_unit_each_floor),t.ceiling_height&&e.append(`office_retail_retail_unit_details[${i}][ceiling_height]`,t.ceiling_height),t.ceiling_height_unit_id&&e.append(`office_retail_retail_unit_details[${i}][ceiling_height_unit_id]`,t.ceiling_height_unit_id)}),a.tower_details&&a.tower_details.length>0&&a.tower_details.forEach((t,i)=>{t.tower_name&&e.append(`tower_details[${i}][tower_name]`,t.tower_name),t.saleable_area_from&&e.append(`tower_details[${i}][saleable_area_from]`,t.saleable_area_from),t.saleable_area_to&&e.append(`tower_details[${i}][saleable_area_to]`,t.saleable_area_to),t.saleable_area_unit_id&&e.append(`tower_details[${i}][saleable_area_unit_id]`,t.saleable_area_unit_id),t.ceiling_height&&e.append(`tower_details[${i}][ceiling_height]`,t.ceiling_height),t.ceiling_height_unit_id&&e.append(`tower_details[${i}][ceiling_height_unit_id]`,t.ceiling_height_unit_id),e.append(`tower_details[${i}][show_carpet_area]`,t.show_carpet_area?"1":"0"),t.carpet_area_from&&e.append(`tower_details[${i}][carpet_area_from]`,t.carpet_area_from),t.carpet_area_to&&e.append(`tower_details[${i}][carpet_area_to]`,t.carpet_area_to),t.carpet_area_unit_id&&e.append(`tower_details[${i}][carpet_area_unit_id]`,t.carpet_area_unit_id),e.append(`tower_details[${i}][show_builtup_area]`,t.show_builtup_area?"1":"0"),t.builtup_area_from&&e.append(`tower_details[${i}][builtup_area_from]`,t.builtup_area_from),t.builtup_area_to&&e.append(`tower_details[${i}][builtup_area_to]`,t.builtup_area_to),t.builtup_area_unit_id&&e.append(`tower_details[${i}][builtup_area_unit_id]`,t.builtup_area_unit_id)}),e.append("free_allotted_parking_four_wheeler",a.free_allotted_parking_four_wheeler?"1":"0"),e.append("free_allotted_parking_two_wheeler",a.free_allotted_parking_two_wheeler?"1":"0"),e.append("available_for_purchase",a.available_for_purchase?"1":"0"),a.no_of_parking&&e.append("no_of_parking",a.no_of_parking),a.total_floor_for_parking&&e.append("total_floor_for_parking",a.total_floor_for_parking),a.basement_parking&&a.basement_parking.length>0&&a.basement_parking.forEach((t,i)=>{t.floor_no&&e.append(`basement_parking[${i}][floor_no]`,t.floor_no),t.ev_charging_point&&e.append(`basement_parking[${i}][ev_charging_point]`,t.ev_charging_point),t.hydraulic_parking&&e.append(`basement_parking[${i}][hydraulic_parking]`,t.hydraulic_parking),t.height_of_basement&&e.append(`basement_parking[${i}][height_of_basement]`,t.height_of_basement),t.height_of_basement_unit_id&&e.append(`basement_parking[${i}][height_of_basement_unit_id]`,t.height_of_basement_unit_id)}),a.amenity_ids&&a.amenity_ids.length>0&&a.amenity_ids.forEach(t=>{e.append("amenity_ids[]",t)}),a.document_uploads&&a.document_uploads.length>0&&a.document_uploads.forEach((t,i)=>{t.category&&e.append(`document_uploads[${i}][category]`,t.category),t.files&&t.files.length>0&&t.files.forEach((g,s)=>{e.append(`document_uploads[${i}][files][${s}]`,g)})}),a.brochure_file?e.append("brochure_file",a.brochure_file):h.value&&a.brochure_deleted&&e.append("delete_brochure","1"),a.remark&&e.append("remark",a.remark);const r=h.value?`/projects/${b.project?.id}`:"/projects";h.value&&e.append("_method","PUT"),(await F.post(r,e,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(P(h.value?"Project updated successfully!":"Project created successfully!","success"),setTimeout(()=>{be.visit("/projects")},2500))}catch(e){console.error("Error creating project:",e),U.value=!1,e.response?.status===422&&e.response?.data?.errors?(l.value=e.response.data.errors,P("Please fix the validation errors before submitting.","error"),W()):P(e.response?.data?.message||(h.value?"Failed to update project. Please try again.":"Failed to create project. Please try again."),"error")}},Y=()=>{if(f.value===1){if(!N()){P("Please fix the validation errors before proceeding.","error"),setTimeout(()=>{const e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100);return}f.value=2}else if(f.value===2){if(a.construction_type_id==="3"){f.value=3;return}l.value={};let e=!1;if(a.construction_type_id||(l.value.construction_type_id=["Please select a construction type"],e=!0),a.category_id||(l.value.category_id=["Please select a category"],e=!0),a.category_id){const r=b.constructionTypes.find(o=>o.id===Number(a.construction_type_id));if(r){const o=r.categories?.find(t=>t.id===Number(a.category_id));o&&o.sub_categories&&o.sub_categories.length>0&&(a.category_id==="2"||a.category_id==="4"||a.category_id==="7"?(!Array.isArray(a.sub_category_id)||a.sub_category_id.length===0)&&(l.value.sub_category_id=["Please select at least one sub-category"],e=!0):a.sub_category_id||(l.value.sub_category_id=["Please select a sub-category"],e=!0))}}if(e){P("Please fix the validation errors before proceeding.","error"),setTimeout(()=>{const r=document.querySelector(".is-invalid");r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100);return}f.value=3}else f.value===3&&J()},Z=()=>{f.value>1&&f.value--},x=j(()=>{if(!a.construction_type_id||!a.category_id||a.category_id!=="2")return[];const e=b.constructionTypes.find(o=>o.id===Number(a.construction_type_id));if(!e||!e.categories)return[];const r=e.categories.find(o=>o.id===Number(a.category_id));return!r||!r.sub_categories?[]:Array.isArray(a.sub_category_id)&&a.sub_category_id.length>0?r.sub_categories.filter(o=>a.sub_category_id.includes(String(o.id))):[]}),ee=j(()=>{if(!a.construction_type_id||!a.category_id||a.category_id!=="4"&&a.category_id!=="7")return[];const e=b.constructionTypes.find(o=>o.id===Number(a.construction_type_id));if(!e||!e.categories)return[];const r=e.categories.find(o=>o.id===Number(a.category_id));return!r||!r.sub_categories?[]:Array.isArray(a.sub_category_id)&&a.sub_category_id.length>0?r.sub_categories.filter(o=>a.sub_category_id.includes(String(o.id))):[]}),ae=j(()=>{if(!a.construction_type_id||a.construction_type_id!=="3")return[];const e=b.constructionTypes.find(r=>r.id===Number(a.construction_type_id));if(e&&e.categories){const r=e.categories.find(o=>o.id===1);if(r&&r.sub_categories)return r.sub_categories}for(const r of b.constructionTypes)if(r.categories){const o=r.categories.find(t=>t.id===1);if(o&&o.sub_categories)return o.sub_categories}return[]}),V=j(()=>{if(!a.construction_type_id||a.construction_type_id!=="3")return[];const e=b.constructionTypes.find(r=>r.id===Number(a.construction_type_id));if(e&&e.categories){const r=e.categories.find(o=>o.id===2);if(r&&r.sub_categories)return r.sub_categories}for(const r of b.constructionTypes)if(r.categories){const o=r.categories.find(t=>t.id===2);if(o&&o.sub_categories)return o.sub_categories}return[]}),te=j(()=>{if(!a.construction_type_id||!a.category_id||a.category_id!=="5")return[];const e=b.constructionTypes.find(o=>o.id===Number(a.construction_type_id));if(!e||!e.categories)return[];const r=e.categories.find(o=>o.id===Number(a.category_id));return!r||!r.sub_categories?[]:Array.isArray(a.sub_category_id)&&a.sub_category_id.length>0?r.sub_categories.filter(o=>a.sub_category_id.includes(String(o.id))):[]}),_e=async()=>{if(!b.project)return;I.value=!0;const e=b.project;if(a.builder_id=String(e.builder_id||""),a.builder_website=e.builder_website||"",a.project_name=e.project_name||"",a.address=e.address||"",a.pincode=e.pincode||"",a.location_link=e.location_link||"",a.land_size=e.land_size||"",a.measurement_unit_id=e.measurement_unit_id?String(e.measurement_unit_id):"",a.rera_no=e.rera_no||"",a.project_status=e.project_status||"",a.restricted_user_ids=e.restricted_user_ids||[],a.construction_type_id=e.construction_type_id?String(e.construction_type_id):"",a.category_id=e.category_id?String(e.category_id):"",e.sub_category_ids)try{const _=typeof e.sub_category_ids=="string"?JSON.parse(e.sub_category_ids):e.sub_category_ids;a.sub_category_id=Array.isArray(_)?_.map(String):[]}catch{a.sub_category_id=[]}else e.sub_category_id?a.sub_category_id=String(e.sub_category_id):a.sub_category_id="";if(a.no_of_towers=e.no_of_towers||"",a.no_of_floors=e.no_of_floors||"",a.total_units=e.total_units||"",a.no_of_unit_each_tower=e.no_of_unit_each_tower||"",a.no_of_lift=e.no_of_lift||"",a.front_road_width=e.front_road_width||"",a.front_road_width_measurement_unit_id=e.front_road_width_measurement_unit_id?String(e.front_road_width_measurement_unit_id):"",a.washroom=e.washroom||"Private",a.two_road_corner=e.two_road_corner||!1,a.towers_different_specification=e.towers_different_specification||!1,e.retail_unit_details)try{const _=typeof e.retail_unit_details=="string"?JSON.parse(e.retail_unit_details):e.retail_unit_details;a.retail_unit_details=Array.isArray(_)?_:[]}catch{a.retail_unit_details=[]}else a.retail_unit_details=[];const r=e.category3_unit_details||e.category3UnitDetails;if(r&&r.length>0?a.category3_unit_details=r.map((_,d)=>({id:_.id||d+1,total_no_of_units:_.total_no_of_units||"",ceiling_height:_.ceiling_height||"",ceiling_height_unit_id:_.ceiling_height_unit_id?String(_.ceiling_height_unit_id):"",plot_area_from:_.plot_area_from||"",plot_area_to:_.plot_area_to||"",plot_area_unit_id:_.plot_area_unit_id?String(_.plot_area_unit_id):"",road_width_from:_.road_width_from||"",road_width_to:_.road_width_to||"",road_width_unit_id:_.road_width_unit_id?String(_.road_width_unit_id):"",constructed_area_from:_.constructed_area_from||"",constructed_area_to:_.constructed_area_to||"",constructed_area_unit_id:_.constructed_area_unit_id?String(_.constructed_area_unit_id):""})):a.category3_unit_details=[],e.category3_utility_board)try{const _=typeof e.category3_utility_board=="string"?JSON.parse(e.category3_utility_board):e.category3_utility_board;a.utility_board=_||{pollution_control_board:{checked:!1,value:""},ec:{checked:!1,value:""},gas:{checked:!1,value:""},power:{checked:!1,value:""},water:{checked:!1,value:""}}}catch{a.utility_board={pollution_control_board:{checked:!1,value:""},ec:{checked:!1,value:""},gas:{checked:!1,value:""},power:{checked:!1,value:""},water:{checked:!1,value:""}}}else a.utility_board={pollution_control_board:{checked:!1,value:""},ec:{checked:!1,value:""},gas:{checked:!1,value:""},power:{checked:!1,value:""},water:{checked:!1,value:""}};if(e.category3_dynamic_facilities)try{const _=typeof e.category3_dynamic_facilities=="string"?JSON.parse(e.category3_dynamic_facilities):e.category3_dynamic_facilities;a.dynamic_facilities=Array.isArray(_)?_.map((d,w)=>({id:d.id||w+1,label:d.label||"",checked:d.checked||!1,value:d.value||""})):[]}catch{a.dynamic_facilities=[]}else a.dynamic_facilities=[];const o=e.category4_tower_details||e.category4TowerDetails;o&&o.length>0?a.category4_tower_details=o.map((_,d)=>({id:_.id||d+1,tower_name:_.tower_name||"",total_units:_.total_units||"",total_floor:_.total_floor||"",sub_category_ids:Array.isArray(_.sub_category_ids)?_.sub_category_ids.map(w=>String(w)):_.sub_category_ids?[String(_.sub_category_ids)]:[]})):a.category4_tower_details=[];const t=e.category4_unit_details||e.category4UnitDetails;t&&t.length>0?a.category4_unit_details=t.map((_,d)=>({id:_.id||d+1,tower_name:_.tower_name||"",saleable_from:_.saleable_from||"",saleable_to:_.saleable_to||"",saleable_unit_id:_.saleable_unit_id?String(_.saleable_unit_id):"",wash_area:_.wash_area||"",wash_area_unit_id:_.wash_area_unit_id?String(_.wash_area_unit_id):"",balcony_area:_.balcony_area||"",balcony_area_unit_id:_.balcony_area_unit_id?String(_.balcony_area_unit_id):"",ceiling_height:_.ceiling_height||"",ceiling_height_unit_id:_.ceiling_height_unit_id?String(_.ceiling_height_unit_id):"",servant_room:_.servant_room||!1,show_carpet_area:!!(_.carpet_area_from||_.carpet_area_to||_.carpet_area_unit_id),carpet_area_from:_.carpet_area_from||"",carpet_area_to:_.carpet_area_to||"",carpet_area_unit_id:_.carpet_area_unit_id?String(_.carpet_area_unit_id):"",show_builtup_area:!!(_.builtup_area_from||_.builtup_area_to||_.builtup_area_unit_id),builtup_area_from:_.builtup_area_from||"",builtup_area_to:_.builtup_area_to||"",builtup_area_unit_id:_.builtup_area_unit_id?String(_.builtup_area_unit_id):""})):a.category4_unit_details=[],a.category4_total_room=e.category4_total_room||"";const i=e.category5_tower_details||e.category5TowerDetails;i&&i.length>0?a.category5_tower_details=i.map((_,d)=>({id:_.id||d+1,tower_name:_.tower_name||"",total_units:_.total_units||"",total_floor:_.total_floor||"",sub_category_ids:Array.isArray(_.sub_category_ids)?_.sub_category_ids.map(w=>String(w)):_.sub_category_ids?[String(_.sub_category_ids)]:[]})):a.category5_tower_details=[];const g=e.category5_unit_details||e.category5UnitDetails;g&&g.length>0?a.category5_unit_details=g.map((_,d)=>({id:_.id||d+1,tower_name:_.tower_name||"",saleable_from:_.saleable_from||"",saleable_to:_.saleable_to||"",saleable_unit_id:_.saleable_unit_id?String(_.saleable_unit_id):"",wash_area:_.wash_area||"",wash_area_unit_id:_.wash_area_unit_id?String(_.wash_area_unit_id):"",balcony_area:_.balcony_area||"",balcony_area_unit_id:_.balcony_area_unit_id?String(_.balcony_area_unit_id):"",ceiling_height:_.ceiling_height||"",ceiling_height_unit_id:_.ceiling_height_unit_id?String(_.ceiling_height_unit_id):"",servant_room:_.servant_room||!1,show_carpet_area:!!(_.carpet_area_from||_.carpet_area_to||_.carpet_area_unit_id),carpet_area_from:_.carpet_area_from||"",carpet_area_to:_.carpet_area_to||"",carpet_area_unit_id:_.carpet_area_unit_id?String(_.carpet_area_unit_id):"",show_builtup_area:!!(_.builtup_area_from||_.builtup_area_to||_.builtup_area_unit_id),builtup_area_from:_.builtup_area_from||"",builtup_area_to:_.builtup_area_to||"",builtup_area_unit_id:_.builtup_area_unit_id?String(_.builtup_area_unit_id):""})):a.category5_unit_details=[],a.category5_total_room=e.category5_total_room||"";const s=e.category6_data||e.category6Data;s?a.category6_data={total_open_area:s.total_open_area||"",total_open_area_unit_id:s.total_open_area_unit_id?String(s.total_open_area_unit_id):"",total_no_of_plots:s.total_no_of_plots||"",project_with_multiple_theme_phase:s.project_with_multiple_theme_phase||!1,phase_name:s.phase_name||"",plots_with_construction:s.plots_with_construction||!1,saleable_plot_from:s.saleable_plot_from||"",saleable_plot_to:s.saleable_plot_to||"",saleable_plot_unit_id:s.saleable_plot_unit_id?String(s.saleable_plot_unit_id):"",show_carpet_plot_size:!!(s.carpet_plot_from||s.carpet_plot_to||s.carpet_plot_unit_id),carpet_plot_from:s.carpet_plot_from||"",carpet_plot_to:s.carpet_plot_to||"",carpet_plot_unit_id:s.carpet_plot_unit_id?String(s.carpet_plot_unit_id):"",constructed_saleable_area_from:s.constructed_saleable_area_from||"",constructed_saleable_area_to:s.constructed_saleable_area_to||"",constructed_saleable_area_unit_id:s.constructed_saleable_area_unit_id?String(s.constructed_saleable_area_unit_id):""}:a.category6_data={total_open_area:"",total_open_area_unit_id:"",total_no_of_plots:"",project_with_multiple_theme_phase:!1,phase_name:"",plots_with_construction:!1,saleable_plot_from:"",saleable_plot_to:"",saleable_plot_unit_id:"",show_carpet_plot_size:!1,carpet_plot_from:"",carpet_plot_to:"",carpet_plot_unit_id:"",constructed_saleable_area_from:"",constructed_saleable_area_to:"",constructed_saleable_area_unit_id:""};const c=e.office_retail_data||e.officeRetailData;c?a.office_retail_data={office_sub_category_id:c.office_sub_category_id?String(c.office_sub_category_id):"",no_of_towers:c.no_of_towers||"",no_of_floors:c.no_of_floors||"",no_of_unit_each_tower:c.no_of_unit_each_tower||"",no_of_lift:c.no_of_lift||"",front_road_width:c.front_road_width||"",front_road_width_unit_id:c.front_road_width_unit_id?String(c.front_road_width_unit_id):"",washroom:c.washroom||"Private",two_road_corner:c.two_road_corner||!1,tower_name:c.tower_name||"",total_units:c.total_units||"",saleable_from:c.saleable_from||"",saleable_to:c.saleable_to||"",saleable_unit_id:c.saleable_unit_id?String(c.saleable_unit_id):"",show_carpet_area:!!(c.carpet_area_from||c.carpet_area_to||c.carpet_area_unit_id),carpet_area_from:c.carpet_area_from||"",carpet_area_to:c.carpet_area_to||"",carpet_area_unit_id:c.carpet_area_unit_id?String(c.carpet_area_unit_id):"",show_builtup_area:!!(c.builtup_area_from||c.builtup_area_to||c.builtup_area_unit_id),builtup_area_from:c.builtup_area_from||"",builtup_area_to:c.builtup_area_to||"",builtup_area_unit_id:c.builtup_area_unit_id?String(c.builtup_area_unit_id):""}:a.office_retail_data={office_sub_category_id:"",no_of_towers:"",no_of_floors:"",no_of_unit_each_tower:"",no_of_lift:"",front_road_width:"",front_road_width_unit_id:"",washroom:"Private",two_road_corner:!1,tower_name:"",total_units:"",saleable_from:"",saleable_to:"",saleable_unit_id:"",show_carpet_area:!1,carpet_area_from:"",carpet_area_to:"",carpet_area_unit_id:"",show_builtup_area:!1,builtup_area_from:"",builtup_area_to:"",builtup_area_unit_id:""};const O=e.office_retail_retail_unit_details||e.officeRetailRetailUnitDetails;if(O&&O.length>0){a.office_retail_retail_unit_details=O.map((n,y)=>({id:n.id||Date.now()+y,tower_name:n.tower_name||"",sub_category_id:n.sub_category_id?String(n.sub_category_id):"",size_from:n.size_from||"",size_to:n.size_to||"",size_unit_id:n.size_unit_id?String(n.size_unit_id):"",front_opening:n.front_opening||"",front_opening_unit_id:n.front_opening_unit_id?String(n.front_opening_unit_id):"",no_of_unit_each_floor:n.no_of_unit_each_floor||"",ceiling_height:n.ceiling_height||"",ceiling_height_unit_id:n.ceiling_height_unit_id?String(n.ceiling_height_unit_id):""}));const _=O.map(n=>n.sub_category_id?String(n.sub_category_id):null).filter(n=>n!==null),w=(Array.isArray(a.sub_category_id)?[...a.sub_category_id]:a.sub_category_id?[a.sub_category_id]:[]).filter(n=>!V.value.some(y=>String(y.id)===String(n)));a.sub_category_id=[...w,..._]}else a.office_retail_retail_unit_details=[];if(a.free_allotted_parking_four_wheeler=e.free_allotted_parking_four_wheeler||!1,a.free_allotted_parking_two_wheeler=e.free_allotted_parking_two_wheeler||!1,a.available_for_purchase=e.available_for_purchase||!1,a.no_of_parking=e.no_of_parking||"",a.total_floor_for_parking=e.total_floor_for_parking||"1",a.remark=e.remark||"",a.existing_brochure_file=e.brochure_file||null,e.state_id)try{const _=await F.get(`/states/${e.state_id}/cities`);if(D.value=_.data,await T(),a.state_id=e.state_id?String(e.state_id):"",e.city_id)try{const d=await F.get(`/cities/${e.city_id}/localities`);$.value=d.data,await T(),a.city_id=e.city_id?String(e.city_id):"",a.locality_id=e.locality_id?String(e.locality_id):""}catch(d){console.error("Error loading localities:",d),a.city_id=e.city_id?String(e.city_id):"",a.locality_id=e.locality_id?String(e.locality_id):""}else a.city_id="",a.locality_id=e.locality_id?String(e.locality_id):""}catch(_){console.error("Error loading cities:",_),a.state_id=e.state_id?String(e.state_id):"",a.city_id=e.city_id?String(e.city_id):"",a.locality_id=e.locality_id?String(e.locality_id):""}else a.state_id="",a.city_id="",a.locality_id=e.locality_id?String(e.locality_id):"";if(await T(),I.value=!1,await T(),e.contacts&&e.contacts.length>0&&(k.value=e.contacts.map(_=>({id:_.id||M++,name:_.name||"",mobile:_.mobile||"",email:_.email||"",designation:_.designation||""}))),e.tower_details&&e.tower_details.length>0&&(a.tower_details=e.tower_details.map(_=>({tower_name:_.tower_name||"",saleable_area_from:_.saleable_area_from||"",saleable_area_to:_.saleable_area_to||"",saleable_area_unit_id:_.saleable_area_unit_id?String(_.saleable_area_unit_id):"",ceiling_height:_.ceiling_height||"",ceiling_height_unit_id:_.ceiling_height_unit_id?String(_.ceiling_height_unit_id):"",carpet_area_from:_.carpet_area_from||"",carpet_area_to:_.carpet_area_to||"",carpet_area_unit_id:_.carpet_area_unit_id?String(_.carpet_area_unit_id):"",builtup_area_from:_.builtup_area_from||"",builtup_area_to:_.builtup_area_to||"",builtup_area_unit_id:_.builtup_area_unit_id?String(_.builtup_area_unit_id):"",show_carpet_area:_.show_carpet_area||!1,show_builtup_area:_.show_builtup_area||!1}))),e.basement_parking&&e.basement_parking.length>0&&(a.basement_parking=e.basement_parking.map(_=>({floor_no:_.floor_no||"",ev_charging_point:_.ev_charging_point||"",hydraulic_parking:_.hydraulic_parking||"",height_of_basement:_.height_of_basement||"",height_of_basement_unit_id:_.height_of_basement_unit_id?String(_.height_of_basement_unit_id):""}))),e.amenities&&e.amenities.length>0&&(a.amenity_ids=e.amenities.map(_=>String(_.id))),e.documents&&e.documents.length>0){const _=[...e.documents].sort((n,y)=>{const B=(n.category||"Other").toLowerCase(),K=(y.category||"Other").toLowerCase();if(B!==K)return B.localeCompare(K);const ie=new Date(n.created_at||0).getTime(),re=new Date(y.created_at||0).getTime();return ie-re}),d=new Map;_.forEach(n=>{const y=n.category||"Other";d.has(y)?d.get(y).existing_documents.push({id:n.id,file_path:n.file_path,file_name:n.file_name}):d.set(y,{id:n.id,category:y,files:[],uploaded_files:[],existing_documents:[{id:n.id,file_path:n.file_path,file_name:n.file_name}]})});const w=Array.from(d.values());a.document_uploads=w}else a.document_uploads=[{id:1,category:"",files:[],uploaded_files:[]}]};return le(async()=>{h.value&&(L.value=!0);try{if(h.value&&await _e(),await T(),typeof window.$<"u"&&window.$.fn.select2){const e=window.$("#restricted_user_ids");e.length&&(e.select2({placeholder:"Select Restricted Users",allowClear:!0,width:"100%"}),a.restricted_user_ids&&a.restricted_user_ids.length>0&&e.val(a.restricted_user_ids.map(r=>String(r))).trigger("change"),e.on("change",function(){const r=window.$(this).val()||[];a.restricted_user_ids=Array.isArray(r)?r.map(o=>o):r?[r]:[]}))}await T(),await new Promise(e=>setTimeout(e,100))}finally{L.value=!1}}),(e,r)=>(m(),C(me,null,[S(ne(ce),{title:h.value?"Edit Project":"Create Project"},null,8,["title"]),S(ye,{breadcrumbs:G.value},{default:de(()=>[u("div",De,[u("div",Ne,[u("div",Re,[u("div",Fe,[u("h4",Ie,q(h.value?"Edit Project":"Create Project"),1)]),u("div",Le,[L.value?(m(),C("div",Oe,[...r[1]||(r[1]=[u("div",{class:"atbd-spin-dots spin-lg"},[u("span",{class:"spin-dot badge-dot dot-primary"}),u("span",{class:"spin-dot badge-dot dot-primary"}),u("span",{class:"spin-dot badge-dot dot-primary"}),u("span",{class:"spin-dot badge-dot dot-primary"})],-1),u("p",{class:"text-dark mt-3 mb-0 fw-medium"},"Loading project data...",-1)])])):A("",!0),ue(u("div",null,[u("div",qe,[u("div",Ve,[S(we,{"current-step":f.value},null,8,["current-step"])]),u("div",Be,[u("form",{onSubmit:pe(J,["prevent"])},[f.value===1?(m(),C("div",Me,[S(ve,{builders:p.builders,form:a,errors:l.value,"validate-form":N},null,8,["builders","form","errors"]),S($e,{states:p.states,cities:D.value,localities:$.value,"measurement-units":p.measurementUnits,form:a,errors:l.value,"validate-form":N},null,8,["states","cities","localities","measurement-units","form","errors"]),S(ke,{"restricted-user-options":p.restrictedUserOptions,contacts:k.value,form:a,errors:l.value,"validate-form":N,"add-contact":H,"remove-contact":Q},null,8,["restricted-user-options","contacts","form","errors"])])):A("",!0),f.value===2?(m(),C("div",We,[S(Se,{"construction-types":p.constructionTypes,"model-value":{construction_type_id:a.construction_type_id,category_id:a.category_id,sub_category_id:a.sub_category_id},errors:l.value,"show-ids":!0,"onUpdate:modelValue":r[0]||(r[0]=o=>{a.construction_type_id=o.construction_type_id,a.category_id=o.category_id,a.sub_category_id=o.sub_category_id,o.construction_type_id==="3"&&!o.category_id&&(a.category_id="1")})},null,8,["construction-types","model-value","errors"]),a.category_id==="2"?(m(),z(ze,{key:0,form:a,errors:l.value,"measurement-units":p.measurementUnits,"sub-categories":x.value},null,8,["form","errors","measurement-units","sub-categories"])):a.construction_type_id==="1"&&a.category_id==="3"?(m(),z(Ee,{key:1,form:a,errors:l.value,"measurement-units":p.measurementUnits},null,8,["form","errors","measurement-units"])):a.construction_type_id==="2"&&(a.category_id==="4"||a.category_id==="7")?(m(),z(Pe,{key:2,form:a,errors:l.value,"measurement-units":p.measurementUnits,"sub-categories":ee.value},null,8,["form","errors","measurement-units","sub-categories"])):a.construction_type_id==="2"&&a.category_id==="5"?(m(),z(Te,{key:3,form:a,errors:l.value,"measurement-units":p.measurementUnits,"sub-categories":te.value},null,8,["form","errors","measurement-units","sub-categories"])):a.construction_type_id==="2"&&a.category_id==="6"?(m(),z(Ae,{key:4,form:a,errors:l.value,"measurement-units":p.measurementUnits},null,8,["form","errors","measurement-units"])):a.construction_type_id==="3"?(m(),z(Ue,{key:5,form:a,errors:l.value,"measurement-units":p.measurementUnits,"office-sub-categories":ae.value,"retail-sub-categories":V.value},null,8,["form","errors","measurement-units","office-sub-categories","retail-sub-categories"])):(m(),z(je,{key:6,form:a,errors:l.value,"measurement-units":p.measurementUnits,condition:{constructionTypeId:"1",categoryId:"1",subCategoryId:"1"}},null,8,["form","errors","measurement-units"]))])):A("",!0),f.value===3?(m(),C("div",Je,[S(Ce,{form:a,errors:l.value,amenities:p.amenities,"measurement-units":p.measurementUnits},null,8,["form","errors","amenities","measurement-units"])])):A("",!0),u("div",Ke,[f.value>1?(m(),C("button",{key:0,type:"button",onClick:Z,class:"btn btn-secondary btn-sm btn-previous"}," Previous ")):A("",!0),u("button",{type:"button",onClick:Y,class:"btn btn-primary btn-sm btn-primary-custom",disabled:U.value},q(U.value?"Processing...":f.value===3?"Create Project":"Next"),9,Ge)])],32)])])],512),[[fe,!L.value]])])])])]),E.value.show?(m(),C("div",{key:0,class:ge(["toast-notification",E.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[u("div",He,[u("span",Qe,q(E.value.type==="success"?"":""),1),u("span",null,q(E.value.message),1)])],2)):A("",!0)]),_:1},8,["breadcrumbs"])],64))}}),ga=he(Xe,[["__scopeId","data-v-96e0bd18"]]);export{ga as default};
