import{d as F,g as z,r as f,O as b,o as A,n as L,c as s,b as d,i as g,F as k,p,t as v,m as V,e as c}from"./app-bTN5IIvP.js";const M={class:"choise-selection-container"},O={class:"mb-4"},D={class:"form-group"},E={class:"d-flex flex-wrap gap-3"},P=["id","checked","onChange","value"],R=["for"],j={key:0,class:"invalid-feedback d-block"},q={key:0,class:"mb-4"},G={key:0,class:"text-muted mb-3"},H={key:1,class:"form-group"},J={class:"d-flex flex-wrap gap-3"},K=["id","checked","onChange","value"],Q=["for"],T={key:0,class:"invalid-feedback d-block"},U={key:2,class:"text-muted mb-3"},W={key:1,class:"mb-4"},X={class:"form-group"},Y={class:"d-flex flex-wrap gap-3"},Z=["id","checked","onChange","type","value"],w=["for"],I={key:0,class:"invalid-feedback d-block"},te=F({__name:"ChoiseSelection",props:{constructionTypes:{},modelValue:{},errors:{default:()=>({})},showIds:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:S}){const o=a,n=S,y=z(()=>o.modelValue.category_id==="2"),m=f([]);b(()=>o.modelValue.sub_category_id,t=>{y.value?m.value=Array.isArray(t)?t:t?[t]:[]:m.value=t?[String(t)]:[]},{immediate:!0});const l=f([]),r=f([]),_=f(!0),h=f(!0),x=()=>{if(o.modelValue.construction_type_id){const t=o.constructionTypes.find(i=>i.id===Number(o.modelValue.construction_type_id));if(t&&t.categories){if(l.value=t.categories,o.modelValue.category_id){const i=l.value.find(e=>e.id===Number(o.modelValue.category_id));i&&i.sub_categories&&(r.value=i.sub_categories)}}else l.value=[]}};b(()=>o.modelValue.construction_type_id,t=>{if(t&&(l.value.length===0||!l.value.some(i=>i.id===Number(o.modelValue.category_id)))){const i=o.constructionTypes.find(e=>e.id===Number(t));if(i&&i.categories&&(l.value=i.categories,o.modelValue.category_id)){const e=l.value.find(u=>u.id===Number(o.modelValue.category_id));e&&e.sub_categories&&(r.value=e.sub_categories)}}},{immediate:!0}),A(async()=>{h.value=!0,x(),await L(),h.value=!1,_.value=!1}),b(()=>o.modelValue.construction_type_id,(t,i)=>{if(!h.value)if(t){const e=o.constructionTypes.find(u=>u.id===Number(t));if(e&&e.categories?l.value=e.categories:l.value=[],!_.value&&i!==void 0&&t!==i)n("update:modelValue",{...o.modelValue,category_id:"",sub_category_id:""}),r.value=[];else if(o.modelValue.category_id){const u=l.value.find(B=>B.id===Number(o.modelValue.category_id));u&&u.sub_categories?r.value=u.sub_categories:r.value=[]}}else l.value=[],!_.value&&i!==void 0&&n("update:modelValue",{...o.modelValue,category_id:"",sub_category_id:""}),r.value=[]},{immediate:!1}),b(()=>o.modelValue.category_id,(t,i)=>{if(!h.value){if(t){const e=l.value.find(u=>u.id===Number(t));e&&e.sub_categories?r.value=e.sub_categories:r.value=[],!_.value&&i!==void 0&&t!==i&&n("update:modelValue",{...o.modelValue,sub_category_id:""})}else r.value=[],!_.value&&i!==void 0&&n("update:modelValue",{...o.modelValue,sub_category_id:""});_.value&&(_.value=!1)}},{immediate:!1});const N=t=>{n("update:modelValue",{...o.modelValue,construction_type_id:t})},C=t=>{n("update:modelValue",{...o.modelValue,category_id:t})},$=t=>{if(y.value){const i=m.value.indexOf(t);i>-1?m.value.splice(i,1):m.value.push(t),n("update:modelValue",{...o.modelValue,sub_category_id:[...m.value]})}else n("update:modelValue",{...o.modelValue,sub_category_id:t})};return(t,i)=>(c(),s("div",M,[d("div",O,[i[0]||(i[0]=d("h5",{class:"mb-3 section-title"},"Property Type",-1)),d("div",D,[d("div",E,[(c(!0),s(k,null,p(a.constructionTypes,e=>(c(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[d("input",{id:`construction_type_${e.id}`,checked:a.modelValue.construction_type_id===String(e.id),onChange:u=>N(String(e.id)),type:"radio",value:String(e.id),class:V(["form-check-input",{"is-invalid":a.errors.construction_type_id}])},null,42,P),d("label",{for:`construction_type_${e.id}`,class:"form-check-label construction-type-label"},v(e.name),9,R)]))),128))]),a.errors.construction_type_id?(c(),s("div",j,v(a.errors.construction_type_id[0]),1)):g("",!0)])]),a.modelValue.construction_type_id?(c(),s("div",q,[i[1]||(i[1]=d("h5",{class:"mb-3 section-title"},"Category",-1)),l.value.length===0?(c(),s("div",G," Loading categories... ")):l.value.length>0?(c(),s("div",H,[d("div",J,[(c(!0),s(k,null,p(l.value,e=>(c(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[d("input",{id:`category_${e.id}`,checked:a.modelValue.category_id===String(e.id),onChange:u=>C(String(e.id)),type:"radio",value:String(e.id),class:V(["form-check-input",{"is-invalid":a.errors.category_id}])},null,42,K),d("label",{for:`category_${e.id}`,class:"form-check-label construction-type-label"},v(e.name),9,Q)]))),128))]),a.errors.category_id?(c(),s("div",T,v(a.errors.category_id[0]),1)):g("",!0)])):(c(),s("div",U," No categories found for this construction type. "))])):g("",!0),a.modelValue.category_id&&r.value.length>0?(c(),s("div",W,[i[2]||(i[2]=d("h5",{class:"mb-3 section-title"},"Sub Category",-1)),d("div",X,[d("div",Y,[(c(!0),s(k,null,p(r.value,e=>(c(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[d("input",{id:`sub_category_${e.id}`,checked:y.value?m.value.includes(String(e.id)):a.modelValue.sub_category_id===String(e.id),onChange:u=>$(String(e.id)),type:y.value?"checkbox":"radio",value:String(e.id),class:V(["form-check-input",{"is-invalid":a.errors.sub_category_id}])},null,42,Z),d("label",{for:`sub_category_${e.id}`,class:"form-check-label construction-type-label"},v(e.name),9,w)]))),128))]),a.errors.sub_category_id?(c(),s("div",I,v(a.errors.sub_category_id[0]),1)):g("",!0)])])):g("",!0)]))}});export{te as _};
