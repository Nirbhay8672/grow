import{d as B,r as u,f as S,c as v,a as i,u as T,h as $,w as m,b as r,i as z,A,e as h,m as E,t as _,F as k,s as f,x as C,_ as F}from"./app-Dto5FeMA.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BhHeXh4H.js";import{M as V}from"./Modal-Dtu2lvpR.js";import{_ as M}from"./PropertyConstructionDocumentForm.vue_vue_type_script_setup_true_lang-B_0-C4cY.js";import{_ as Y}from"./PropertyConstructionDocumentTable.vue_vue_type_script_setup_true_lang-CtPi3DFy.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const I={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=B({__name:"PropertyConstructionDocuments",props:{propertyConstructionDocuments:{}},setup(w){const x=[{title:"Dashboard",href:q().url},{title:"Property Construction Documents",href:"/property-construction-documents"}],l=u(!1),e=u(null),p=u(!1),a=u({}),s=u({show:!1,message:"",type:"success"}),o=S({name:"",is_active:!0}),d=()=>{o.name="",o.is_active=!0,a.value={},e.value=null,l.value=!1},n=(t,c="success")=>{s.value={show:!0,message:t,type:c},setTimeout(()=>{s.value.show=!1},3e3)},b=t=>{e.value=t,o.name=t.name,o.is_active=t.is_active,a.value={},l.value=!0},g=()=>{d(),l.value=!0},y=async()=>{p.value=!0,a.value={};try{e.value?(await f.put(`/property-construction-documents/${e.value.id}`,o),n("Property Construction Document updated successfully!")):(await f.post("/property-construction-documents",o),n("Property Construction Document created successfully!")),d(),C.reload()}catch(t){t.response?.status===422?(a.value=t.response.data.errors,n("Please fix the validation errors.","error")):(console.error("Error saving property construction document:",t),n("An error occurred while saving the property construction document.","error"))}finally{p.value=!1}},D=async t=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the property construction document "${t.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await f.delete(`/property-construction-documents/${t.id}`),n("Property Construction Document deleted successfully!"),C.reload()}catch(P){console.error("Error deleting property construction document:",P),n("An error occurred while deleting the property construction document.","error")}};return(t,c)=>(h(),v(k,null,[i(T($),{title:"Property Construction Documents Management"}),i(N,{breadcrumbs:x},{default:m(()=>[r("div",I,[r("div",U,[i(Y,{"property-construction-documents":w.propertyConstructionDocuments,onEdit:b,onDelete:D},{"header-action":m(()=>[r("button",{onClick:g,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...c[0]||(c[0]=[r("span",{"data-feather":"plus",class:"me-1"},null,-1),A(" Add Property Construction Document ",-1)])])]),_:1},8,["property-construction-documents"]),i(V,{show:l.value,title:e.value?"Edit Property Construction Document":"Create Property Construction Document",loading:p.value,"submit-label":e.value?"Update Property Construction Document":"Create Property Construction Document",size:"sm",onClose:d,onSubmit:y},{default:m(()=>[i(M,{form:o,"editing-property-construction-document":e.value,errors:a.value,onSubmit:y,onCancel:d},null,8,["form","editing-property-construction-document","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),s.value.show?(h(),v("div",{key:0,class:E(["toast-notification",s.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[r("div",j,[r("span",G,_(s.value.type==="success"?"✅":"❌"),1),r("span",null,_(s.value.message),1)])],2)):z("",!0)]),_:1})],64))}}),Z=F(H,[["__scopeId","data-v-9e07ec89"]]);export{Z as default};
