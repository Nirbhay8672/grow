import{d as S,f as c,r as T,c as p,a as _,u as $,h as A,w as b,b as t,i as f,q as x,e as m,t as y,n as E,F,s as v,I as g,_ as I}from"./app-0JMNLgL9.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-B_cPmPuj.js";import{d as V}from"./index-BcgMG_W3.js";import{_ as D}from"./LocalityForm.vue_vue_type_script_setup_true_lang-C0pOXFFu.js";import{_ as q}from"./LocalityTable.vue_vue_type_script_setup_true_lang-ISGePZWw.js";import"./index-CMWG4mbA.js";const Y={class:"row"},M={class:"col-12"},P={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-hidden":"false",style:{"background-color":"rgba(0,0,0,0.5)"}},R={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},U={class:"modal-content"},j={class:"modal-header py-2 px-3"},G={class:"modal-title mb-0",style:{"font-size":"16px","font-weight":"600"}},H={class:"modal-body py-3 px-3"},J={class:"modal-footer py-2 px-3"},K=["disabled"],O={key:0,class:"spinner-border spinner-border-sm me-1"},Q={class:"d-flex align-items-center"},W={class:"me-2",style:{"font-size":"18px"}},X=S({__name:"Localities",props:{localities:{},states:{}},setup(w){const h=w,C=[{title:"Dashboard",href:V().url},{title:"Localities",href:"/localities"}],r=c(!1),a=c(null),d=c(!1),n=c({}),i=c({show:!1,message:"",type:"success"}),s=T({name:"",zip_code:"",state_id:"",city_id:"",is_active:!0}),u=()=>{s.name="",s.zip_code="",s.state_id="",s.city_id="",s.is_active=!0,n.value={},a.value=null,r.value=!1},z=()=>{u(),r.value=!0},L=e=>{a.value=e,s.name=e.name,s.zip_code=e.zip_code,s.state_id=e.state_id.toString(),s.city_id=e.city_id.toString(),s.is_active=e.is_active,n.value={},r.value=!0},l=(e,o="success")=>{i.value={show:!0,message:e,type:o},setTimeout(()=>{i.value.show=!1},3e3)},k=async()=>{d.value=!0,n.value={};try{const e={name:s.name,zip_code:s.zip_code,state_id:parseInt(s.state_id),city_id:parseInt(s.city_id),is_active:s.is_active};a.value?(await v.put(`/localities/${a.value.id}`,e),l("Locality updated successfully!")):(await v.post("/localities",e),l("Locality created successfully!")),u(),g.reload()}catch(e){e.response?.status===422?(n.value=e.response.data.errors,l("Please fix the validation errors.","error")):l("An error occurred while saving the locality.","error")}finally{d.value=!1}},B=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the locality "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await v.delete(`/localities/${e.id}`),l("Locality deleted successfully!"),g.reload()}catch{l("An error occurred while deleting the locality.","error")}};return(e,o)=>(m(),p(F,null,[_($(A),{title:"Localities Management"}),_(N,{breadcrumbs:C},{default:b(()=>[t("div",Y,[t("div",M,[_(q,{localities:h.localities,onEdit:L,onDelete:B},{"header-action":b(()=>[t("button",{onClick:z,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...o[0]||(o[0]=[t("span",{"data-feather":"plus",class:"me-1"},null,-1),x(" Add Locality ",-1)])])]),_:1},8,["localities"]),r.value?(m(),p("div",P,[t("div",R,[t("div",U,[t("div",j,[t("h5",G,y(a.value?"Edit Locality":"Create Locality"),1),t("button",{type:"button",class:"btn-close",onClick:u,"aria-label":"Close"},[...o[1]||(o[1]=[t("span",{"aria-hidden":"true"},"×",-1)])])]),t("div",H,[_(D,{form:s,states:h.states,"editing-locality":a.value,errors:n.value},null,8,["form","states","editing-locality","errors"])]),t("div",J,[t("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:u,style:{"font-size":"13px"}},"Cancel"),t("button",{type:"button",class:"btn btn-primary btn-sm",onClick:k,disabled:d.value,style:{"font-size":"13px"}},[d.value?(m(),p("span",O)):f("",!0),x(" "+y(a.value?"Update Locality":"Create Locality"),1)],8,K)])])])])):f("",!0)])]),i.value.show?(m(),p("div",{key:0,class:E(["toast-notification",i.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[t("div",Q,[t("span",W,y(i.value.type==="success"?"✅":"❌"),1),t("span",null,y(i.value.message),1)])],2)):f("",!0)]),_:1})],64))}}),ne=I(X,[["__scopeId","data-v-5a6744a3"]]);export{ne as default};
