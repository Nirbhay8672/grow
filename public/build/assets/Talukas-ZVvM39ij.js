import{d as B,r as n,f as S,c as h,a as u,u as $,h as z,w as f,b as s,i as A,A as E,e as k,m as D,t as w,F,s as p,x,_ as N}from"./app-ujE8Vp_h.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-CHpGfBAA.js";import{M}from"./Modal-BlDpeJj7.js";import{_ as I}from"./TalukaForm.vue_vue_type_script_setup_true_lang-JAgpzKvD.js";import{_ as Y}from"./TalukaTable.vue_vue_type_script_setup_true_lang-BNWyuvm3.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const P={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=B({__name:"Talukas",props:{talukas:{},districts:{}},setup(v){const b=[{title:"Dashboard",href:q().url},{title:"Talukas",href:"/talukas"}],c=n(!1),t=n(null),m=n(!1),l=n({}),r=n({show:!1,message:"",type:"success"}),a=S({name:"",district_id:"",is_active:!0}),d=()=>{a.name="",a.district_id="",a.is_active=!0,l.value={},t.value=null,c.value=!1},o=(e,i="success")=>{r.value={show:!0,message:e,type:i},setTimeout(()=>{r.value.show=!1},3e3)},g=e=>{t.value=e,a.name=e.name,a.district_id=e.district_id.toString(),a.is_active=e.is_active,l.value={},c.value=!0},T=()=>{d(),c.value=!0},_=async()=>{m.value=!0,l.value={};try{const e={...a,district_id:parseInt(a.district_id)};t.value?(await p.put(`/talukas/${t.value.id}`,e),o("Taluka updated successfully!")):(await p.post("/talukas",e),o("Taluka created successfully!")),d(),x.reload()}catch(e){e.response?.status===422?(l.value=e.response.data.errors,o("Please fix the validation errors.","error")):(console.error("Error saving taluka:",e),o("An error occurred while saving the taluka.","error"))}finally{m.value=!1}},y=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the taluka "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await p.delete(`/talukas/${e.id}`),o("Taluka deleted successfully!"),x.reload()}catch(C){console.error("Error deleting taluka:",C),o("An error occurred while deleting the taluka.","error")}};return(e,i)=>(k(),h(F,null,[u($(z),{title:"Talukas Management"}),u(V,{breadcrumbs:b},{default:f(()=>[s("div",P,[s("div",U,[u(Y,{talukas:v.talukas,onEdit:g,onDelete:y},{"header-action":f(()=>[s("button",{onClick:T,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...i[0]||(i[0]=[s("span",{"data-feather":"plus",class:"me-1"},null,-1),E(" Add Taluka ",-1)])])]),_:1},8,["talukas"]),u(M,{show:c.value,title:t.value?"Edit Taluka":"Create Taluka",loading:m.value,"submit-label":t.value?"Update Taluka":"Create Taluka",size:"sm",onClose:d,onSubmit:_},{default:f(()=>[u(I,{form:a,districts:v.districts,"editing-taluka":t.value,errors:l.value,onSubmit:_,onCancel:d},null,8,["form","districts","editing-taluka","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),r.value.show?(k(),h("div",{key:0,class:D(["toast-notification",r.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[s("div",j,[s("span",G,w(r.value.type==="success"?"✅":"❌"),1),s("span",null,w(r.value.message),1)])],2)):A("",!0)]),_:1})],64))}}),Z=N(H,[["__scopeId","data-v-e9b4e311"]]);export{Z as default};
