import{d as B,r as n,f as T,c as v,a as u,u as $,h as z,w as m,b as o,i as A,A as E,e as h,m as k,t as _,F,s as f,x as w,_ as N}from"./app-Dto5FeMA.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-BhHeXh4H.js";import{M as D}from"./Modal-Dtu2lvpR.js";import{_ as M}from"./PropertySourceForm.vue_vue_type_script_setup_true_lang-D4ssVVo7.js";import{_ as Y}from"./PropertySourceTable.vue_vue_type_script_setup_true_lang-B_WSuVQj.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const I={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=B({__name:"PropertySources",props:{propertySources:{}},setup(x){const b=[{title:"Dashboard",href:q().url},{title:"Property Sources",href:"/property-sources"}],i=n(!1),r=n(null),d=n(!1),c=n({}),s=n({show:!1,message:"",type:"success"}),t=T({name:"",is_active:!0}),p=()=>{t.name="",t.is_active=!0,c.value={},r.value=null,i.value=!1},a=(e,l="success")=>{s.value={show:!0,message:e,type:l},setTimeout(()=>{s.value.show=!1},3e3)},S=e=>{r.value=e,t.name=e.name,t.is_active=e.is_active,c.value={},i.value=!0},g=()=>{p(),i.value=!0},y=async()=>{d.value=!0,c.value={};try{r.value?(await f.put(`/property-sources/${r.value.id}`,t),a("Property Source updated successfully!")):(await f.post("/property-sources",t),a("Property Source created successfully!")),p(),w.reload()}catch(e){e.response?.status===422?(c.value=e.response.data.errors,a("Please fix the validation errors.","error")):(console.error("Error saving property source:",e),a("An error occurred while saving the property source.","error"))}finally{d.value=!1}},P=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the property source "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await f.delete(`/property-sources/${e.id}`),a("Property Source deleted successfully!"),w.reload()}catch(C){console.error("Error deleting property source:",C),a("An error occurred while deleting the property source.","error")}};return(e,l)=>(h(),v(F,null,[u($(z),{title:"Property Sources Management"}),u(V,{breadcrumbs:b},{default:m(()=>[o("div",I,[o("div",U,[u(Y,{"property-sources":x.propertySources,onEdit:S,onDelete:P},{"header-action":m(()=>[o("button",{onClick:g,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...l[0]||(l[0]=[o("span",{"data-feather":"plus",class:"me-1"},null,-1),E(" Add Property Source ",-1)])])]),_:1},8,["property-sources"]),u(D,{show:i.value,title:r.value?"Edit Property Source":"Create Property Source",loading:d.value,"submit-label":r.value?"Update Property Source":"Create Property Source",size:"sm",onClose:p,onSubmit:y},{default:m(()=>[u(M,{form:t,"editing-property-source":r.value,errors:c.value,onSubmit:y,onCancel:p},null,8,["form","editing-property-source","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),s.value.show?(h(),v("div",{key:0,class:k(["toast-notification",s.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[o("div",j,[o("span",G,_(s.value.type==="success"?"✅":"❌"),1),o("span",null,_(s.value.message),1)])],2)):A("",!0)]),_:1})],64))}}),Z=N(H,[["__scopeId","data-v-c253feef"]]);export{Z as default};
