import{d as F,g as z,r as v,O as p,o as A,n as E,c as s,b as n,i as g,F as h,p as k,t as b,m as x,e as l}from"./app-BqoACYlz.js";const $={class:"choise-selection-container"},D={class:"mb-4"},M={class:"form-group"},O={key:0,class:"d-flex flex-wrap gap-2"},R=["onClick"],P={key:1,class:"text-muted mb-3"},U={key:2,class:"invalid-feedback d-block"},j={key:0,class:"mb-3 section-title",style:{"background-color":"orange",color:"#1c467b",padding:"8px 12px","border-radius":"4px",width:"100%","font-weight":"bold"}},q={key:1,class:"mb-4"},G={key:0,class:"text-muted mb-3"},H={key:1,class:"form-group"},J={class:"d-flex flex-wrap gap-2"},K=["onClick"],Q={key:0,class:"invalid-feedback d-block"},W={key:2,class:"text-muted mb-3"},X={key:2,class:"mb-4"},Y={class:"form-group"},Z={class:"d-flex flex-wrap gap-2"},I=["onClick"],w={key:0,class:"invalid-feedback d-block"},te=F({__name:"ChoiseSelection",props:{constructionTypes:{},modelValue:{},errors:{default:()=>({})},showIds:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:S}){const o=a,r=S,V=z(()=>o.modelValue.category_id==="2"||o.modelValue.category_id==="4"||o.modelValue.category_id==="5"||o.modelValue.category_id==="7"),m=v([]);p(()=>o.modelValue.sub_category_id,t=>{V.value?m.value=Array.isArray(t)?t:t?[t]:[]:m.value=t?[String(t)]:[]},{immediate:!0});const d=v([]),c=v([]),y=v(!0),f=v(!0),N=()=>{if(o.modelValue.construction_type_id){const t=o.modelValue.construction_type_id==="4"?"2":o.modelValue.construction_type_id,i=o.constructionTypes.find(e=>e.id===Number(t));if(i&&i.categories){if(d.value=i.categories,o.modelValue.category_id){const e=d.value.find(u=>u.id===Number(o.modelValue.category_id));e&&e.sub_categories&&(c.value=e.sub_categories)}}else d.value=[]}};p(()=>o.modelValue.construction_type_id,t=>{if(t&&(d.value.length===0||!d.value.some(i=>i.id===Number(o.modelValue.category_id)))){const i=t==="4"?"2":t,e=o.constructionTypes.find(u=>u.id===Number(i));if(e&&e.categories&&(d.value=e.categories,o.modelValue.category_id)){const u=d.value.find(_=>_.id===Number(o.modelValue.category_id));u&&u.sub_categories&&(c.value=u.sub_categories)}}},{immediate:!0}),A(async()=>{f.value=!0,N(),await E(),f.value=!1,y.value=!1}),p(()=>o.modelValue.construction_type_id,(t,i)=>{if(!f.value)if(t){const e=t==="4"?"2":t,u=o.constructionTypes.find(_=>_.id===Number(e));if(u&&u.categories?d.value=u.categories:d.value=[],!y.value&&i!==void 0&&t!==i)r("update:modelValue",{...o.modelValue,category_id:"",sub_category_id:""}),c.value=[];else if(o.modelValue.category_id){const _=d.value.find(B=>B.id===Number(o.modelValue.category_id));_&&_.sub_categories?c.value=_.sub_categories:c.value=[]}}else d.value=[],!y.value&&i!==void 0&&r("update:modelValue",{...o.modelValue,category_id:"",sub_category_id:""}),c.value=[]},{immediate:!1}),p(()=>o.modelValue.category_id,(t,i)=>{if(!f.value){if(t){const e=d.value.find(u=>u.id===Number(t));e&&e.sub_categories?c.value=e.sub_categories:c.value=[],!y.value&&i!==void 0&&t!==i&&r("update:modelValue",{...o.modelValue,sub_category_id:""})}else c.value=[],!y.value&&i!==void 0&&r("update:modelValue",{...o.modelValue,sub_category_id:""});y.value&&(y.value=!1)}},{immediate:!1});const C=t=>{r("update:modelValue",{...o.modelValue,construction_type_id:t})},T=t=>{r("update:modelValue",{...o.modelValue,category_id:t})},L=t=>{if(V.value){const i=m.value.indexOf(t);i>-1?m.value.splice(i,1):m.value.push(t),r("update:modelValue",{...o.modelValue,sub_category_id:[...m.value]})}else r("update:modelValue",{...o.modelValue,sub_category_id:t})};return(t,i)=>(l(),s("div",$,[n("div",D,[i[0]||(i[0]=n("h5",{class:"mb-3 section-title"},"Property Type",-1)),n("div",M,[a.constructionTypes&&a.constructionTypes.length>0?(l(),s("div",O,[(l(!0),s(h,null,k(a.constructionTypes,e=>(l(),s("button",{key:e.id,type:"button",class:x(["btn btn-sm",a.modelValue.construction_type_id===String(e.id)?"btn-primary":"btn-outline-primary"]),onClick:u=>C(String(e.id)),style:{"border-color":"#1c467b","border-radius":"20px",height:"30px"}},b(e.name),11,R))),128))])):(l(),s("div",P," Loading property types... ")),a.errors.construction_type_id?(l(),s("div",U,b(a.errors.construction_type_id[0]),1)):g("",!0)])]),a.modelValue.construction_type_id==="4"?(l(),s("h5",j," RESIDENTIAL ")):g("",!0),a.modelValue.construction_type_id&&a.modelValue.construction_type_id!=="3"&&d.value.length>0?(l(),s("div",q,[i[1]||(i[1]=n("h5",{class:"mb-3 section-title"},"Category",-1)),d.value.length===0?(l(),s("div",G," Loading categories... ")):d.value.length>0?(l(),s("div",H,[n("div",J,[(l(!0),s(h,null,k(d.value,e=>(l(),s("button",{key:e.id,type:"button",class:x(["btn btn-sm",a.modelValue.category_id===String(e.id)?"btn-primary":"btn-outline-primary"]),onClick:u=>T(String(e.id)),style:{"border-color":"#1c467b","border-radius":"20px",height:"30px"}},b(e.name),11,K))),128))]),a.errors.category_id?(l(),s("div",Q,b(a.errors.category_id[0]),1)):g("",!0)])):(l(),s("div",W," No categories found for this construction type. "))])):g("",!0),a.modelValue.category_id&&a.modelValue.construction_type_id!=="3"&&c.value.length>0?(l(),s("div",X,[i[2]||(i[2]=n("h5",{class:"mb-3 section-title"},"Sub Category",-1)),n("div",Y,[n("div",Z,[(l(!0),s(h,null,k(c.value,e=>(l(),s("button",{key:e.id,type:"button",class:x(["btn btn-sm",(V.value?m.value.includes(String(e.id)):a.modelValue.sub_category_id===String(e.id))?"btn-primary":"btn-outline-primary"]),onClick:u=>L(String(e.id)),style:{"border-color":"#1c467b","border-radius":"20px",height:"30px"}},b(e.name.toUpperCase()),11,I))),128))]),a.errors.sub_category_id?(l(),s("div",w,b(a.errors.sub_category_id[0]),1)):g("",!0)])])):g("",!0)]))}});export{te as _};
