import{d as T,f as c,r as $,c as m,a as p,u as E,h as A,w as y,b as e,i as h,q as x,e as f,t as _,n as F,F as N,s as b,I as w,_ as V}from"./app-0JMNLgL9.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-B_cPmPuj.js";import{_ as M}from"./StateForm.vue_vue_type_script_setup_true_lang-Da5cx48B.js";import{_ as q}from"./StateTable.vue_vue_type_script_setup_true_lang-B5JMNVvT.js";import{d as I}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const L={class:"row"},Y={class:"col-12"},P={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-labelledby":"stateModalLabel","aria-hidden":"false",style:{"background-color":"rgba(0,0,0,0.5)"}},U={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},j={class:"modal-content"},G={class:"modal-header py-2 px-3"},H={class:"modal-title mb-0",id:"stateModalLabel",style:{"font-size":"16px","font-weight":"600"}},J={class:"modal-body py-3 px-3"},K={class:"modal-footer py-2 px-3"},O=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm me-1"},R={class:"d-flex align-items-center"},W={class:"me-2",style:{"font-size":"18px"}},X=T({__name:"States",props:{states:{}},setup(g){const S=[{title:"Dashboard",href:I().url},{title:"States",href:"/states"}],d=c(!1),a=c(null),u=c(!1),n=c({}),r=c({show:!1,message:"",type:"success"}),s=$({name:"",code:"",is_active:!0}),i=()=>{s.name="",s.code="",s.is_active=!0,n.value={},a.value=null,d.value=!1},l=(t,o="success")=>{r.value={show:!0,message:t,type:o},setTimeout(()=>{r.value.show=!1},3e3)},C=t=>{a.value=t,s.name=t.name,s.code=t.code,s.is_active=t.is_active,n.value={},d.value=!0},k=()=>{i(),d.value=!0},v=async()=>{u.value=!0,n.value={};try{a.value?(await b.put(`/states/${a.value.id}`,s),l("State updated successfully!")):(await b.post("/states",s),l("State created successfully!")),i(),w.reload()}catch(t){t.response?.status===422?(n.value=t.response.data.errors,l("Please fix the validation errors.","error")):(console.error("Error saving state:",t),l("An error occurred while saving the state.","error"))}finally{u.value=!1}},B=async t=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the state "${t.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await b.delete(`/states/${t.id}`),l("State deleted successfully!"),w.reload()}catch(z){console.error("Error deleting state:",z),l("An error occurred while deleting the state.","error")}};return(t,o)=>(f(),m(N,null,[p(E(A),{title:"States Management"}),p(D,{breadcrumbs:S},{default:y(()=>[e("div",L,[e("div",Y,[p(q,{states:g.states,onEdit:C,onDelete:B},{"header-action":y(()=>[e("button",{onClick:k,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...o[0]||(o[0]=[e("span",{"data-feather":"plus",class:"me-1"},null,-1),x(" Add State ",-1)])])]),_:1},8,["states"]),d.value?(f(),m("div",P,[e("div",U,[e("div",j,[e("div",G,[e("h5",H,_(a.value?"Edit State":"Create State"),1),e("button",{type:"button",class:"btn-close",onClick:i,"aria-label":"Close"},[...o[1]||(o[1]=[e("span",{"aria-hidden":"true"},"×",-1)])])]),e("div",J,[p(M,{form:s,"editing-state":a.value,errors:n.value,onSubmit:v,onCancel:i},null,8,["form","editing-state","errors"])]),e("div",K,[e("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:i,style:{"font-size":"13px"}}," Cancel "),e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:v,disabled:u.value,style:{"font-size":"13px"}},[u.value?(f(),m("span",Q)):h("",!0),x(" "+_(a.value?"Update State":"Create State"),1)],8,O)])])])])):h("",!0)])]),r.value.show?(f(),m("div",{key:0,class:F(["toast-notification",r.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[e("div",R,[e("span",W,_(r.value.type==="success"?"✅":"❌"),1),e("span",null,_(r.value.message),1)])],2)):h("",!0)]),_:1})],64))}}),le=V(X,[["__scopeId","data-v-48345663"]]);export{le as default};
