import{d as S,r as c,f as $,c as v,a as l,u as z,h as A,w as m,b as o,i as E,A as k,e as h,m as F,t as _,F as N,s as f,x as C,_ as V}from"./app-EEW5rfl7.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNQNEmhQ.js";import{M}from"./Modal-DgqnacDg.js";import{_ as Y}from"./ConstructionTypeForm.vue_vue_type_script_setup_true_lang-B654UMIr.js";import{_ as q}from"./ConstructionTypeTable.vue_vue_type_script_setup_true_lang-BtVwBVg2.js";import{d as I}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const P={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=S({__name:"ConstructionTypes",props:{constructionTypes:{}},setup(w){const x=[{title:"Dashboard",href:I().url},{title:"Construction Types",href:"/construction-types"}],u=c(!1),t=c(null),p=c(!1),r=c({}),a=c({show:!1,message:"",type:"success"}),s=$({name:"",is_active:!0}),d=()=>{s.name="",s.is_active=!0,r.value={},t.value=null,u.value=!1},n=(e,i="success")=>{a.value={show:!0,message:e,type:i},setTimeout(()=>{a.value.show=!1},3e3)},b=e=>{t.value=e,s.name=e.name,s.is_active=e.is_active,r.value={},u.value=!0},g=()=>{d(),u.value=!0},y=async()=>{p.value=!0,r.value={};try{t.value?(await f.put(`/construction-types/${t.value.id}`,s),n("Construction Type updated successfully!")):(await f.post("/construction-types",s),n("Construction Type created successfully!")),d(),C.reload()}catch(e){e.response?.status===422?(r.value=e.response.data.errors,n("Please fix the validation errors.","error")):(console.error("Error saving construction type:",e),n("An error occurred while saving the construction type.","error"))}finally{p.value=!1}},T=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the construction type "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await f.delete(`/construction-types/${e.id}`),n("Construction Type deleted successfully!"),C.reload()}catch(B){console.error("Error deleting construction type:",B),n("An error occurred while deleting the construction type.","error")}};return(e,i)=>(h(),v(N,null,[l(z(A),{title:"Construction Types Management"}),l(D,{breadcrumbs:x},{default:m(()=>[o("div",P,[o("div",U,[l(q,{"construction-types":w.constructionTypes,onEdit:b,onDelete:T},{"header-action":m(()=>[o("button",{onClick:g,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...i[0]||(i[0]=[o("span",{"data-feather":"plus",class:"me-1"},null,-1),k(" Add Construction Type ",-1)])])]),_:1},8,["construction-types"]),l(M,{show:u.value,title:t.value?"Edit Construction Type":"Create Construction Type",loading:p.value,"submit-label":t.value?"Update Construction Type":"Create Construction Type",size:"sm",onClose:d,onSubmit:y},{default:m(()=>[l(Y,{form:s,"editing-construction-type":t.value,errors:r.value,onSubmit:y,onCancel:d},null,8,["form","editing-construction-type","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),a.value.show?(h(),v("div",{key:0,class:F(["toast-notification",a.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[o("div",j,[o("span",G,_(a.value.type==="success"?"✅":"❌"),1),o("span",null,_(a.value.message),1)])],2)):E("",!0)]),_:1})],64))}}),Z=V(H,[["__scopeId","data-v-345cef8a"]]);export{Z as default};
