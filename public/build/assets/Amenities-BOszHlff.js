import{d as S,r as l,f as T,c as h,a as c,u as $,h as z,w as f,b as a,i as E,A as k,e as y,m as F,t as _,F as N,s as p,x as w,_ as V}from"./app-EEW5rfl7.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNQNEmhQ.js";import{M}from"./Modal-DgqnacDg.js";import{_ as Y}from"./AmenityForm.vue_vue_type_script_setup_true_lang-C_GeQwG0.js";import{_ as q}from"./AmenityTable.vue_vue_type_script_setup_true_lang-CelYZlQW.js";import{d as I}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const P={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=S({__name:"Amenities",props:{amenities:{}},setup(x){const b=[{title:"Dashboard",href:I().url},{title:"Amenities",href:"/amenities"}],u=l(!1),t=l(null),d=l(!1),n=l({}),o=l({show:!1,message:"",type:"success"}),s=T({name:"",is_active:!0}),m=()=>{s.name="",s.is_active=!0,n.value={},t.value=null,u.value=!1},i=(e,r="success")=>{o.value={show:!0,message:e,type:r},setTimeout(()=>{o.value.show=!1},3e3)},g=e=>{t.value=e,s.name=e.name,s.is_active=e.is_active,n.value={},u.value=!0},A=()=>{m(),u.value=!0},v=async()=>{d.value=!0,n.value={};try{t.value?(await p.put(`/amenities/${t.value.id}`,s),i("Amenity updated successfully!")):(await p.post("/amenities",s),i("Amenity created successfully!")),m(),w.reload()}catch(e){e.response?.status===422?(n.value=e.response.data.errors,i("Please fix the validation errors.","error")):(console.error("Error saving amenity:",e),i("An error occurred while saving the amenity.","error"))}finally{d.value=!1}},C=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the amenity "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await p.delete(`/amenities/${e.id}`),i("Amenity deleted successfully!"),w.reload()}catch(B){console.error("Error deleting amenity:",B),i("An error occurred while deleting the amenity.","error")}};return(e,r)=>(y(),h(N,null,[c($(z),{title:"Amenities Management"}),c(D,{breadcrumbs:b},{default:f(()=>[a("div",P,[a("div",U,[c(q,{amenities:x.amenities,onEdit:g,onDelete:C},{"header-action":f(()=>[a("button",{onClick:A,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...r[0]||(r[0]=[a("span",{"data-feather":"plus",class:"me-1"},null,-1),k(" Add Amenity ",-1)])])]),_:1},8,["amenities"]),c(M,{show:u.value,title:t.value?"Edit Amenity":"Create Amenity",loading:d.value,"submit-label":t.value?"Update Amenity":"Create Amenity",size:"sm",onClose:m,onSubmit:v},{default:f(()=>[c(Y,{form:s,"editing-amenity":t.value,errors:n.value,onSubmit:v,onCancel:m},null,8,["form","editing-amenity","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),o.value.show?(y(),h("div",{key:0,class:F(["toast-notification",o.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[a("div",j,[a("span",G,_(o.value.type==="success"?"✅":"❌"),1),a("span",null,_(o.value.message),1)])],2)):E("",!0)]),_:1})],64))}}),Z=V(H,[["__scopeId","data-v-af15ed11"]]);export{Z as default};
