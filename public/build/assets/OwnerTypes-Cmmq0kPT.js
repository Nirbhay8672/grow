import{d as B,r as i,f as S,c as y,a as c,u as $,h as z,w,b as a,i as A,A as E,e as v,m as k,t as h,F,s as m,x as _,_ as N}from"./app-BqoACYlz.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ch6UkGlw.js";import{M as D}from"./Modal-BNkumT-v.js";import{_ as M}from"./OwnerTypeForm.vue_vue_type_script_setup_true_lang-B4djQJCQ.js";import{_ as Y}from"./OwnerTypeTable.vue_vue_type_script_setup_true_lang-BM8uvs4D.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const I={class:"row"},P={class:"col-12"},U={class:"d-flex align-items-center"},j={class:"me-2",style:{"font-size":"18px"}},G=B({__name:"OwnerTypes",props:{ownerTypes:{}},setup(x){const b=[{title:"Dashboard",href:q().url},{title:"Owner Types",href:"/owner-types"}],u=i(!1),t=i(null),p=i(!1),n=i({}),r=i({show:!1,message:"",type:"success"}),s=S({name:"",is_active:!0}),d=()=>{s.name="",s.is_active=!0,n.value={},t.value=null,u.value=!1},o=(e,l="success")=>{r.value={show:!0,message:e,type:l},setTimeout(()=>{r.value.show=!1},3e3)},g=e=>{t.value=e,s.name=e.name,s.is_active=e.is_active,n.value={},u.value=!0},T=()=>{d(),u.value=!0},f=async()=>{p.value=!0,n.value={};try{t.value?(await m.put(`/owner-types/${t.value.id}`,s),o("Owner Type updated successfully!")):(await m.post("/owner-types",s),o("Owner Type created successfully!")),d(),_.reload()}catch(e){e.response?.status===422?(n.value=e.response.data.errors,o("Please fix the validation errors.","error")):(console.error("Error saving owner type:",e),o("An error occurred while saving the owner type.","error"))}finally{p.value=!1}},O=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the owner type "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await m.delete(`/owner-types/${e.id}`),o("Owner Type deleted successfully!"),_.reload()}catch(C){console.error("Error deleting owner type:",C),o("An error occurred while deleting the owner type.","error")}};return(e,l)=>(v(),y(F,null,[c($(z),{title:"Owner Types Management"}),c(V,{breadcrumbs:b},{default:w(()=>[a("div",I,[a("div",P,[c(Y,{"owner-types":x.ownerTypes,onEdit:g,onDelete:O},{"header-action":w(()=>[a("button",{onClick:T,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...l[0]||(l[0]=[a("span",{"data-feather":"plus",class:"me-1"},null,-1),E(" Add Owner Type ",-1)])])]),_:1},8,["owner-types"]),c(D,{show:u.value,title:t.value?"Edit Owner Type":"Create Owner Type",loading:p.value,"submit-label":t.value?"Update Owner Type":"Create Owner Type",size:"sm",onClose:d,onSubmit:f},{default:w(()=>[c(M,{form:s,"editing-owner-type":t.value,errors:n.value,onSubmit:f,onCancel:d},null,8,["form","editing-owner-type","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),r.value.show?(v(),y("div",{key:0,class:k(["toast-notification",r.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[a("div",U,[a("span",j,h(r.value.type==="success"?"✅":"❌"),1),a("span",null,h(r.value.message),1)])],2)):A("",!0)]),_:1})],64))}}),Z=N(G,[["__scopeId","data-v-27e9f561"]]);export{Z as default};
