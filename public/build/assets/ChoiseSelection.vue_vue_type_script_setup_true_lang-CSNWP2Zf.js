import{d as w,r as g,o as B,n as D,O as V,c as s,b as d,i as m,F as h,p as y,t as r,m as b,A as k,e as a}from"./app-Btitcj9w.js";const F={class:"choise-selection-container"},z={class:"mb-4"},L={class:"form-group"},M={class:"d-flex flex-wrap gap-3"},A=["id","checked","onChange","value"],E=["for"],I={key:0},O={key:0,class:"invalid-feedback d-block"},P={key:0,class:"mb-4"},j={key:0,class:"text-muted mb-3"},q={key:1,class:"form-group"},G={class:"d-flex flex-wrap gap-3"},H=["id","checked","onChange","value"],J=["for"],K={key:0},Q={key:0,class:"invalid-feedback d-block"},R={key:2,class:"text-muted mb-3"},U={key:1,class:"mb-4"},W={class:"form-group"},X={class:"d-flex flex-wrap gap-3"},Y=["id","checked","onChange","value"],Z=["for"],T={key:0},ee={key:0,class:"invalid-feedback d-block"},ie=w({__name:"ChoiseSelection",props:{constructionTypes:{},modelValue:{},errors:{default:()=>({})},showIds:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(i,{emit:p}){const l=i,_=p,c=g([]),n=g([]),v=g(!0),f=g(!0),S=()=>{if(l.modelValue.construction_type_id){const o=l.constructionTypes.find(t=>t.id===Number(l.modelValue.construction_type_id));if(o&&o.categories&&(c.value=o.categories,l.modelValue.category_id)){const t=c.value.find(e=>e.id===Number(l.modelValue.category_id));t&&t.sub_categories&&(n.value=t.sub_categories)}}};B(async()=>{f.value=!0,S(),await D(),f.value=!1,v.value=!1}),V(()=>l.modelValue.construction_type_id,(o,t)=>{if(!f.value)if(o){const e=l.constructionTypes.find(u=>u.id===Number(o));if(e&&e.categories?c.value=e.categories:c.value=[],!v.value&&t!==void 0&&o!==t)_("update:modelValue",{...l.modelValue,category_id:"",sub_category_id:""}),n.value=[];else if(l.modelValue.category_id){const u=c.value.find(C=>C.id===Number(l.modelValue.category_id));u&&u.sub_categories?n.value=u.sub_categories:n.value=[]}}else c.value=[],!v.value&&t!==void 0&&_("update:modelValue",{...l.modelValue,category_id:"",sub_category_id:""}),n.value=[]},{immediate:!1}),V(()=>l.modelValue.category_id,(o,t)=>{if(!f.value){if(o){const e=c.value.find(u=>u.id===Number(o));e&&e.sub_categories?n.value=e.sub_categories:n.value=[],!v.value&&t!==void 0&&o!==t&&_("update:modelValue",{...l.modelValue,sub_category_id:""})}else n.value=[],!v.value&&t!==void 0&&_("update:modelValue",{...l.modelValue,sub_category_id:""});v.value&&(v.value=!1)}},{immediate:!1});const x=o=>{_("update:modelValue",{...l.modelValue,construction_type_id:o})},N=o=>{_("update:modelValue",{...l.modelValue,category_id:o})},$=o=>{_("update:modelValue",{...l.modelValue,sub_category_id:o})};return(o,t)=>(a(),s("div",F,[d("div",z,[t[0]||(t[0]=d("h5",{class:"mb-3 section-title"},"Property Type",-1)),d("div",L,[d("div",M,[(a(!0),s(h,null,y(i.constructionTypes,e=>(a(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[d("input",{id:`construction_type_${e.id}`,checked:i.modelValue.construction_type_id===String(e.id),onChange:u=>x(String(e.id)),type:"radio",value:String(e.id),class:b(["form-check-input",{"is-invalid":i.errors.construction_type_id}])},null,42,A),d("label",{for:`construction_type_${e.id}`,class:"form-check-label construction-type-label"},[k(r(e.name)+" ",1),i.showIds?(a(),s("span",I,"(ID: "+r(e.id)+")",1)):m("",!0)],8,E)]))),128))]),i.errors.construction_type_id?(a(),s("div",O,r(i.errors.construction_type_id[0]),1)):m("",!0)])]),i.modelValue.construction_type_id?(a(),s("div",P,[t[1]||(t[1]=d("h5",{class:"mb-3 section-title"},"Category",-1)),c.value.length===0?(a(),s("div",j," Loading categories... ")):c.value.length>0?(a(),s("div",q,[d("div",G,[(a(!0),s(h,null,y(c.value,e=>(a(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[d("input",{id:`category_${e.id}`,checked:i.modelValue.category_id===String(e.id),onChange:u=>N(String(e.id)),type:"radio",value:String(e.id),class:b(["form-check-input",{"is-invalid":i.errors.category_id}])},null,42,H),d("label",{for:`category_${e.id}`,class:"form-check-label construction-type-label"},[k(r(e.name)+" ",1),i.showIds?(a(),s("span",K,"(ID: "+r(e.id)+")",1)):m("",!0)],8,J)]))),128))]),i.errors.category_id?(a(),s("div",Q,r(i.errors.category_id[0]),1)):m("",!0)])):(a(),s("div",R," No categories found for this construction type. "))])):m("",!0),i.modelValue.category_id&&n.value.length>0?(a(),s("div",U,[t[2]||(t[2]=d("h5",{class:"mb-3 section-title"},"Sub Category",-1)),d("div",W,[d("div",X,[(a(!0),s(h,null,y(n.value,e=>(a(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[d("input",{id:`sub_category_${e.id}`,checked:i.modelValue.sub_category_id===String(e.id),onChange:u=>$(String(e.id)),type:"radio",value:String(e.id),class:b(["form-check-input",{"is-invalid":i.errors.sub_category_id}])},null,42,Y),d("label",{for:`sub_category_${e.id}`,class:"form-check-label construction-type-label"},[k(r(e.name)+" ",1),i.showIds?(a(),s("span",T,"(ID: "+r(e.id)+")",1)):m("",!0)],8,Z)]))),128))]),i.errors.sub_category_id?(a(),s("div",ee,r(i.errors.sub_category_id[0]),1)):m("",!0)])])):m("",!0)]))}});export{ie as _};
