import{d as D,c as l,a as t,w as y,b,v as E,n as g,F as w,r as S,t as n,e as N,f as V,o as r,g as z,h,i as F,j as _,u as U,k as q,l as L,m as $,p as x,q as C}from"./app-CtIQcBuM.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJZPRBDV.js";import{d as j}from"./index-BcgMG_W3.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CMWG4mbA.js";const G={class:"space-y-4"},P={class:"form-group"},H=["value"],J={key:0,class:"invalid-feedback"},K={class:"form-group"},O={key:0,class:"invalid-feedback"},Q={class:"form-group"},R={class:"form-check"},W=D({__name:"DistrictForm",props:{form:{},states:{},editingDistrict:{},errors:{}},emits:["submit","cancel"],setup(s,{emit:p}){return(m,e)=>(r(),l("div",G,[t("div",P,[e[4]||(e[4]=t("label",{for:"state_id",class:"form-label"}," State ",-1)),y(t("select",{id:"state_id","onUpdate:modelValue":e[0]||(e[0]=a=>s.form.state_id=a),class:g(["form-control",{"is-invalid":s.errors.state_id}]),required:""},[e[3]||(e[3]=t("option",{value:""},"Select a state",-1)),(r(!0),l(w,null,S(s.states,a=>(r(),l("option",{key:a.id,value:a.id},n(a.name)+" ("+n(a.code)+") ",9,H))),128))],2),[[E,s.form.state_id]]),s.errors.state_id?(r(),l("div",J,n(s.errors.state_id[0]),1)):b("",!0)]),t("div",K,[e[5]||(e[5]=t("label",{for:"name",class:"form-label"}," District Name ",-1)),y(t("input",{id:"name","onUpdate:modelValue":e[1]||(e[1]=a=>s.form.name=a),type:"text",class:g(["form-control",{"is-invalid":s.errors.name}]),placeholder:"Enter district name",required:""},null,2),[[N,s.form.name]]),s.errors.name?(r(),l("div",O,n(s.errors.name[0]),1)):b("",!0)]),t("div",Q,[t("div",R,[y(t("input",{id:"is_active","onUpdate:modelValue":e[2]||(e[2]=a=>s.form.is_active=a),type:"checkbox",class:"form-check-input"},null,512),[[V,s.form.is_active]]),e[6]||(e[6]=t("label",{for:"is_active",class:"form-check-label"}," Active ",-1))])])]))}}),X={class:"card mb-3"},Z={class:"card-body p-0"},tt={class:"table4 p-25 bg-white mb-30"},et={class:"table-responsive"},st={class:"table mb-0"},at={class:"userDatatable-content"},it={class:"d-flex align-items-center"},ot={class:"userDatatable-inline-title"},lt={href:"#",class:"text-dark fw-500"},nt={class:"userDatatable-content"},rt={class:"bg-opacity-primary color-primary rounded-pill userDatatable-content-status active"},dt={class:"userDatatable-content"},ct={class:"userDatatable-content"},ut={class:"userDatatable-content"},mt={class:"d-flex align-items-center gap-2"},vt=["onClick"],bt=["onClick"],ft={key:0,class:"text-center py-5"},ht=D({__name:"DistrictTable",props:{districts:{}},emits:["edit","delete"],setup(s,{emit:p}){const m=p,e=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return z(()=>{typeof window<"u"&&window.feather&&window.feather.replace()}),(a,d)=>(r(),l("div",X,[d[2]||(d[2]=t("div",{class:"card-header color-dark fw-500"}," Districts Management ",-1)),t("div",Z,[t("div",tt,[t("div",et,[t("table",st,[d[0]||(d[0]=t("thead",null,[t("tr",{class:"userDatatable-header"},[t("th",null,[t("span",{class:"userDatatable-title"},"District Name")]),t("th",null,[t("span",{class:"userDatatable-title"},"State")]),t("th",null,[t("span",{class:"userDatatable-title"},"Status")]),t("th",null,[t("span",{class:"userDatatable-title"},"Created")]),t("th",null,[t("span",{class:"userDatatable-title"},"Actions")])])],-1)),t("tbody",null,[(r(!0),l(w,null,S(s.districts,o=>(r(),l("tr",{key:o.id},[t("td",null,[t("div",at,[t("div",it,[t("div",ot,[t("a",lt,n(o.name),1)])])])]),t("td",null,[t("div",nt,[t("span",rt,n(o.state.name)+" ("+n(o.state.code)+") ",1)])]),t("td",null,[t("div",dt,[t("span",{class:g(["rounded-pill userDatatable-content-status",o.is_active?"bg-opacity-success color-success active":"bg-opacity-danger color-danger"])},n(o.is_active?"Active":"Inactive"),3)])]),t("td",null,[t("div",ct,n(e(o.created_at)),1)]),t("td",null,[t("div",ut,[t("div",mt,[t("button",{onClick:c=>m("edit",o),class:"btn btn-sm btn-outline-primary",title:"Edit District",style:{padding:"4px 8px","min-width":"32px",height:"32px"}}," ‚úèÔ∏è ",8,vt),t("button",{onClick:c=>m("delete",o),class:"btn btn-sm btn-outline-danger",title:"Delete District",style:{padding:"4px 8px","min-width":"32px",height:"32px"}}," üóëÔ∏è ",8,bt)])])])]))),128))])])])])]),s.districts.length===0?(r(),l("div",ft,[...d[1]||(d[1]=[t("div",{class:"mb-3"},[t("span",{style:{"font-size":"48px"}},"üèòÔ∏è")],-1),t("h6",{class:"text-muted"},"No districts found",-1),t("p",{class:"text-muted mb-0"},"Get started by creating a new district.",-1)])])):b("",!0)]))}}),pt={class:"row"},_t={class:"col-12"},gt={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-labelledby":"districtModalLabel","aria-hidden":"false",style:{"background-color":"rgba(0,0,0,0.5)"}},yt={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},xt={class:"modal-content"},Dt={class:"modal-header"},wt={class:"modal-title",id:"districtModalLabel"},kt={class:"modal-body"},$t={class:"modal-footer"},Ct=["disabled"],St={key:0,class:"spinner-border spinner-border-sm me-1"},Mt={class:"d-flex align-items-center"},Bt={class:"me-2",style:{"font-size":"18px"}},Tt=D({__name:"Districts",props:{districts:{},states:{}},setup(s){const p=[{title:"Dashboard",href:j().url},{title:"Districts",href:"/districts"}],m=h(!1),e=h(null),a=h(!1),d=h({}),o=h({show:!1,message:"",type:"success"}),c=F({name:"",state_id:"",is_active:!0}),f=()=>{c.name="",c.state_id="",c.is_active=!0,d.value={},e.value=null,m.value=!1},v=(i,u="success")=>{o.value={show:!0,message:i,type:u},setTimeout(()=>{o.value.show=!1},3e3)},M=i=>{e.value=i,c.name=i.name,c.state_id=i.state_id.toString(),c.is_active=i.is_active,d.value={},m.value=!0},B=()=>{f(),m.value=!0},k=async()=>{a.value=!0,d.value={};try{const i={...c,state_id:parseInt(c.state_id)};e.value?(await x.put(`/districts/${e.value.id}`,i),v("District updated successfully!")):(await x.post("/districts",i),v("District created successfully!")),f(),C.reload()}catch(i){i.response?.status===422?(d.value=i.response.data.errors,v("Please fix the validation errors.","error")):(console.error("Error saving district:",i),v("An error occurred while saving the district.","error"))}finally{a.value=!1}},T=async i=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the district "${i.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await x.delete(`/districts/${i.id}`),v("District deleted successfully!"),C.reload()}catch(A){console.error("Error deleting district:",A),v("An error occurred while deleting the district.","error")}};return(i,u)=>(r(),l(w,null,[_(U(q),{title:"Districts Management"}),_(I,{breadcrumbs:p},{default:L(()=>[t("div",pt,[t("div",_t,[t("div",{class:"d-flex justify-content-between align-items-center mb-30 mt-4"},[u[1]||(u[1]=t("div",null,[t("h4",{class:"color-dark fw-500"},"Districts Management"),t("p",{class:"text-muted mb-0"},"Manage districts and their states")],-1)),t("button",{onClick:B,class:"btn btn-primary btn-default btn-squared text-capitalize lh-normal px-50 py-15"},[...u[0]||(u[0]=[t("span",{"data-feather":"plus",class:"me-1"},null,-1),$(" Add District ",-1)])])]),_(ht,{districts:s.districts,onEdit:M,onDelete:T},null,8,["districts"]),m.value?(r(),l("div",gt,[t("div",yt,[t("div",xt,[t("div",Dt,[t("h5",wt,n(e.value?"Edit District":"Create District"),1),t("button",{type:"button",class:"btn-close",onClick:f,"aria-label":"Close"},[...u[2]||(u[2]=[t("span",{"aria-hidden":"true"},"√ó",-1)])])]),t("div",kt,[_(W,{form:c,states:s.states,"editing-district":e.value,errors:d.value,onSubmit:k,onCancel:f},null,8,["form","states","editing-district","errors"])]),t("div",$t,[t("button",{type:"button",class:"btn btn-secondary",onClick:f}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:k,disabled:a.value},[a.value?(r(),l("span",St)):b("",!0),$(" "+n(e.value?"Update District":"Create District"),1)],8,Ct)])])])])):b("",!0)])]),o.value.show?(r(),l("div",{key:0,class:g(["toast-notification",o.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[t("div",Mt,[t("span",Bt,n(o.value.type==="success"?"‚úÖ":"‚ùå"),1),t("span",null,n(o.value.message),1)])],2)):b("",!0)]),_:1})],64))}}),Ut=Y(Tt,[["__scopeId","data-v-738c627f"]]);export{Ut as default};
