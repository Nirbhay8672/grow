import{d as S,r as l,f as T,c as h,a as n,u as $,h as z,w as f,b as a,i as A,A as E,e as w,m as k,t as x,F,s as p,x as b,_ as N}from"./app-vsHvR4hc.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-DDFWEhqg.js";import{M}from"./Modal-DOTDtqc5.js";import{_ as I}from"./DistrictForm.vue_vue_type_script_setup_true_lang-CUxW5r-E.js";import{_ as Y}from"./DistrictTable.vue_vue_type_script_setup_true_lang-D8CRegu8.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const P={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=S({__name:"Districts",props:{districts:{},states:{}},setup(v){const g=[{title:"Dashboard",href:q().url},{title:"Districts",href:"/districts"}],d=l(!1),s=l(null),m=l(!1),o=l({}),r=l({show:!1,message:"",type:"success"}),e=T({name:"",state_id:"",is_active:!0}),u=()=>{e.name="",e.state_id="",e.is_active=!0,o.value={},s.value=null,d.value=!1},i=(t,c="success")=>{r.value={show:!0,message:t,type:c},setTimeout(()=>{r.value.show=!1},3e3)},D=t=>{s.value=t,e.name=t.name,e.state_id=t.state_id.toString(),e.is_active=t.is_active,o.value={},d.value=!0},y=()=>{u(),d.value=!0},_=async()=>{m.value=!0,o.value={};try{const t={...e,state_id:parseInt(e.state_id)};s.value?(await p.put(`/districts/${s.value.id}`,t),i("District updated successfully!")):(await p.post("/districts",t),i("District created successfully!")),u(),b.reload()}catch(t){t.response?.status===422?(o.value=t.response.data.errors,i("Please fix the validation errors.","error")):(console.error("Error saving district:",t),i("An error occurred while saving the district.","error"))}finally{m.value=!1}},C=async t=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the district "${t.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await p.delete(`/districts/${t.id}`),i("District deleted successfully!"),b.reload()}catch(B){console.error("Error deleting district:",B),i("An error occurred while deleting the district.","error")}};return(t,c)=>(w(),h(F,null,[n($(z),{title:"Districts Management"}),n(V,{breadcrumbs:g},{default:f(()=>[a("div",P,[a("div",U,[n(Y,{districts:v.districts,onEdit:D,onDelete:C},{"header-action":f(()=>[a("button",{onClick:y,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...c[0]||(c[0]=[a("span",{"data-feather":"plus",class:"me-1"},null,-1),E(" Add District ",-1)])])]),_:1},8,["districts"]),n(M,{show:d.value,title:s.value?"Edit District":"Create District",loading:m.value,"submit-label":s.value?"Update District":"Create District",size:"sm",onClose:u,onSubmit:_},{default:f(()=>[n(I,{form:e,states:v.states,"editing-district":s.value,errors:o.value,onSubmit:_,onCancel:u},null,8,["form","states","editing-district","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),r.value.show?(w(),h("div",{key:0,class:k(["toast-notification",r.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[a("div",j,[a("span",G,x(r.value.type==="success"?"✅":"❌"),1),a("span",null,x(r.value.message),1)])],2)):A("",!0)]),_:1})],64))}}),Z=N(H,[["__scopeId","data-v-dc8bcf65"]]);export{Z as default};
