import{d as T,r as n,f as $,c as v,a as c,u as z,h as A,w as m,b as s,i as E,A as k,e as y,m as D,t as _,F,s as b,x as h,_ as N}from"./app-Be-oj_rW.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-B35ZGNqe.js";import{M}from"./Modal-CHKfyabB.js";import{_ as I}from"./SubCategoryForm.vue_vue_type_script_setup_true_lang-BQ86HgSu.js";import{_ as Y}from"./SubCategoryTable.vue_vue_type_script_setup_true_lang-BRbUlyML.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const P={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=T({__name:"SubCategories",props:{subCategories:{},categories:{}},setup(f){const w=[{title:"Dashboard",href:q().url},{title:"Sub Categories",href:"/sub-categories"}],u=n(!1),a=n(null),g=n(!1),i=n({}),o=n({show:!1,message:"",type:"success"}),t=$({name:"",category_id:"",is_active:!0}),d=()=>{t.name="",t.category_id="",t.is_active=!0,i.value={},a.value=null,u.value=!1},r=(e,l="success")=>{o.value={show:!0,message:e,type:l},setTimeout(()=>{o.value.show=!1},3e3)},C=e=>{a.value=e,t.name=e.name,t.category_id=e.category_id.toString(),t.is_active=e.is_active,i.value={},u.value=!0},x=()=>{d(),u.value=!0},p=async()=>{g.value=!0,i.value={};try{const e={...t,category_id:parseInt(t.category_id)};a.value?(await b.put(`/sub-categories/${a.value.id}`,e),r("Sub Category updated successfully!")):(await b.post("/sub-categories",e),r("Sub Category created successfully!")),d(),h.reload()}catch(e){e.response?.status===422?(i.value=e.response.data.errors,r("Please fix the validation errors.","error")):(console.error("Error saving sub category:",e),r("An error occurred while saving the sub category.","error"))}finally{g.value=!1}},S=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the sub category "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await b.delete(`/sub-categories/${e.id}`),r("Sub Category deleted successfully!"),h.reload()}catch(B){console.error("Error deleting sub category:",B),r("An error occurred while deleting the sub category.","error")}};return(e,l)=>(y(),v(F,null,[c(z(A),{title:"Sub Categories Management"}),c(V,{breadcrumbs:w},{default:m(()=>[s("div",P,[s("div",U,[c(Y,{"sub-categories":f.subCategories,onEdit:C,onDelete:S},{"header-action":m(()=>[s("button",{onClick:x,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...l[0]||(l[0]=[s("span",{"data-feather":"plus",class:"me-1"},null,-1),k(" Add Sub Category ",-1)])])]),_:1},8,["sub-categories"]),c(M,{show:u.value,title:a.value?"Edit Sub Category":"Create Sub Category",loading:g.value,"submit-label":a.value?"Update Sub Category":"Create Sub Category",size:"sm",onClose:d,onSubmit:p},{default:m(()=>[c(I,{form:t,"editing-sub-category":a.value,categories:f.categories,errors:i.value,onSubmit:p,onCancel:d},null,8,["form","editing-sub-category","categories","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),o.value.show?(y(),v("div",{key:0,class:D(["toast-notification",o.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[s("div",j,[s("span",G,_(o.value.type==="success"?"✅":"❌"),1),s("span",null,_(o.value.message),1)])],2)):E("",!0)]),_:1})],64))}}),Z=N(H,[["__scopeId","data-v-ce778be0"]]);export{Z as default};
