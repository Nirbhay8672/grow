import{d as S,f as c,r as T,c as m,a as p,u as $,h as E,w as x,b as e,i as h,q as w,e as f,t as _,n as A,F,s as b,I as g,_ as N}from"./app-0JMNLgL9.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-B_cPmPuj.js";import{_ as I}from"./DistrictForm.vue_vue_type_script_setup_true_lang-CzwMnesI.js";import{_ as M}from"./DistrictTable.vue_vue_type_script_setup_true_lang-D75e89_1.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const L={class:"row"},Y={class:"col-12"},P={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-labelledby":"districtModalLabel","aria-hidden":"false",style:{"background-color":"rgba(0,0,0,0.5)"}},U={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},j={class:"modal-content"},G={class:"modal-header py-2 px-3"},H={class:"modal-title mb-0",id:"districtModalLabel",style:{"font-size":"16px","font-weight":"600"}},J={class:"modal-body py-3 px-3"},K={class:"modal-footer py-2 px-3"},O=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm me-1"},R={class:"d-flex align-items-center"},W={class:"me-2",style:{"font-size":"18px"}},X=S({__name:"Districts",props:{districts:{},states:{}},setup(v){const D=[{title:"Dashboard",href:q().url},{title:"Districts",href:"/districts"}],d=c(!1),a=c(null),u=c(!1),l=c({}),i=c({show:!1,message:"",type:"success"}),s=T({name:"",state_id:"",is_active:!0}),n=()=>{s.name="",s.state_id="",s.is_active=!0,l.value={},a.value=null,d.value=!1},r=(t,o="success")=>{i.value={show:!0,message:t,type:o},setTimeout(()=>{i.value.show=!1},3e3)},C=t=>{a.value=t,s.name=t.name,s.state_id=t.state_id.toString(),s.is_active=t.is_active,l.value={},d.value=!0},k=()=>{n(),d.value=!0},y=async()=>{u.value=!0,l.value={};try{const t={...s,state_id:parseInt(s.state_id)};a.value?(await b.put(`/districts/${a.value.id}`,t),r("District updated successfully!")):(await b.post("/districts",t),r("District created successfully!")),n(),g.reload()}catch(t){t.response?.status===422?(l.value=t.response.data.errors,r("Please fix the validation errors.","error")):(console.error("Error saving district:",t),r("An error occurred while saving the district.","error"))}finally{u.value=!1}},B=async t=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the district "${t.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await b.delete(`/districts/${t.id}`),r("District deleted successfully!"),g.reload()}catch(z){console.error("Error deleting district:",z),r("An error occurred while deleting the district.","error")}};return(t,o)=>(f(),m(F,null,[p($(E),{title:"Districts Management"}),p(V,{breadcrumbs:D},{default:x(()=>[e("div",L,[e("div",Y,[p(M,{districts:v.districts,onEdit:C,onDelete:B},{"header-action":x(()=>[e("button",{onClick:k,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...o[0]||(o[0]=[e("span",{"data-feather":"plus",class:"me-1"},null,-1),w(" Add District ",-1)])])]),_:1},8,["districts"]),d.value?(f(),m("div",P,[e("div",U,[e("div",j,[e("div",G,[e("h5",H,_(a.value?"Edit District":"Create District"),1),e("button",{type:"button",class:"btn-close",onClick:n,"aria-label":"Close"},[...o[1]||(o[1]=[e("span",{"aria-hidden":"true"},"×",-1)])])]),e("div",J,[p(I,{form:s,states:v.states,"editing-district":a.value,errors:l.value,onSubmit:y,onCancel:n},null,8,["form","states","editing-district","errors"])]),e("div",K,[e("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:n,style:{"font-size":"13px"}}," Cancel "),e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:y,disabled:u.value,style:{"font-size":"13px"}},[u.value?(f(),m("span",Q)):h("",!0),w(" "+_(a.value?"Update District":"Create District"),1)],8,O)])])])])):h("",!0)])]),i.value.show?(f(),m("div",{key:0,class:A(["toast-notification",i.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[e("div",R,[e("span",W,_(i.value.type==="success"?"✅":"❌"),1),e("span",null,_(i.value.message),1)])],2)):h("",!0)]),_:1})],64))}}),rt=N(X,[["__scopeId","data-v-cf75b494"]]);export{rt as default};
