import{d as C,r as g,o as B,n as F,O as k,c as s,b as l,i as v,F as h,p as y,t as _,m as b,e as c}from"./app-IPI9ePqY.js";const z={class:"choise-selection-container"},w={class:"mb-4"},L={class:"form-group"},M={class:"d-flex flex-wrap gap-3"},D=["id","checked","onChange","value"],E=["for"],O={key:0,class:"invalid-feedback d-block"},P={key:0,class:"mb-4"},j={key:0,class:"text-muted mb-3"},q={key:1,class:"form-group"},A={class:"d-flex flex-wrap gap-3"},G=["id","checked","onChange","value"],H=["for"],J={key:0,class:"invalid-feedback d-block"},K={key:2,class:"text-muted mb-3"},Q={key:1,class:"mb-4"},R={class:"form-group"},U={class:"d-flex flex-wrap gap-3"},W=["id","checked","onChange","value"],X=["for"],Y={key:0,class:"invalid-feedback d-block"},T=C({__name:"ChoiseSelection",props:{constructionTypes:{},modelValue:{},errors:{default:()=>({})},showIds:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:V}){const o=a,u=V,d=g([]),n=g([]),m=g(!0),f=g(!0),p=()=>{if(o.modelValue.construction_type_id){const i=o.constructionTypes.find(t=>t.id===Number(o.modelValue.construction_type_id));if(i&&i.categories&&(d.value=i.categories,o.modelValue.category_id)){const t=d.value.find(e=>e.id===Number(o.modelValue.category_id));t&&t.sub_categories&&(n.value=t.sub_categories)}}};B(async()=>{f.value=!0,p(),await F(),f.value=!1,m.value=!1}),k(()=>o.modelValue.construction_type_id,(i,t)=>{if(!f.value)if(i){const e=o.constructionTypes.find(r=>r.id===Number(i));if(e&&e.categories?d.value=e.categories:d.value=[],!m.value&&t!==void 0&&i!==t)u("update:modelValue",{...o.modelValue,category_id:"",sub_category_id:""}),n.value=[];else if(o.modelValue.category_id){const r=d.value.find(N=>N.id===Number(o.modelValue.category_id));r&&r.sub_categories?n.value=r.sub_categories:n.value=[]}}else d.value=[],!m.value&&t!==void 0&&u("update:modelValue",{...o.modelValue,category_id:"",sub_category_id:""}),n.value=[]},{immediate:!1}),k(()=>o.modelValue.category_id,(i,t)=>{if(!f.value){if(i){const e=d.value.find(r=>r.id===Number(i));e&&e.sub_categories?n.value=e.sub_categories:n.value=[],!m.value&&t!==void 0&&i!==t&&u("update:modelValue",{...o.modelValue,sub_category_id:""})}else n.value=[],!m.value&&t!==void 0&&u("update:modelValue",{...o.modelValue,sub_category_id:""});m.value&&(m.value=!1)}},{immediate:!1});const S=i=>{u("update:modelValue",{...o.modelValue,construction_type_id:i})},x=i=>{u("update:modelValue",{...o.modelValue,category_id:i})},$=i=>{u("update:modelValue",{...o.modelValue,sub_category_id:i})};return(i,t)=>(c(),s("div",z,[l("div",w,[t[0]||(t[0]=l("h5",{class:"mb-3 section-title"},"Property Type",-1)),l("div",L,[l("div",M,[(c(!0),s(h,null,y(a.constructionTypes,e=>(c(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[l("input",{id:`construction_type_${e.id}`,checked:a.modelValue.construction_type_id===String(e.id),onChange:r=>S(String(e.id)),type:"radio",value:String(e.id),class:b(["form-check-input",{"is-invalid":a.errors.construction_type_id}])},null,42,D),l("label",{for:`construction_type_${e.id}`,class:"form-check-label construction-type-label"},_(e.name),9,E)]))),128))]),a.errors.construction_type_id?(c(),s("div",O,_(a.errors.construction_type_id[0]),1)):v("",!0)])]),a.modelValue.construction_type_id?(c(),s("div",P,[t[1]||(t[1]=l("h5",{class:"mb-3 section-title"},"Category",-1)),d.value.length===0?(c(),s("div",j," Loading categories... ")):d.value.length>0?(c(),s("div",q,[l("div",A,[(c(!0),s(h,null,y(d.value,e=>(c(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[l("input",{id:`category_${e.id}`,checked:a.modelValue.category_id===String(e.id),onChange:r=>x(String(e.id)),type:"radio",value:String(e.id),class:b(["form-check-input",{"is-invalid":a.errors.category_id}])},null,42,G),l("label",{for:`category_${e.id}`,class:"form-check-label construction-type-label"},_(e.name),9,H)]))),128))]),a.errors.category_id?(c(),s("div",J,_(a.errors.category_id[0]),1)):v("",!0)])):(c(),s("div",K," No categories found for this construction type. "))])):v("",!0),a.modelValue.category_id&&n.value.length>0?(c(),s("div",Q,[t[2]||(t[2]=l("h5",{class:"mb-3 section-title"},"Sub Category",-1)),l("div",R,[l("div",U,[(c(!0),s(h,null,y(n.value,e=>(c(),s("div",{key:e.id,class:"form-check form-check-inline construction-type-radio"},[l("input",{id:`sub_category_${e.id}`,checked:a.modelValue.sub_category_id===String(e.id),onChange:r=>$(String(e.id)),type:"radio",value:String(e.id),class:b(["form-check-input",{"is-invalid":a.errors.sub_category_id}])},null,42,W),l("label",{for:`sub_category_${e.id}`,class:"form-check-label construction-type-label"},_(e.name),9,X)]))),128))]),a.errors.sub_category_id?(c(),s("div",Y,_(a.errors.sub_category_id[0]),1)):v("",!0)])])):v("",!0)]))}});export{T as _};
