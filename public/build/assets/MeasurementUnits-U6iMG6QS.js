import{d as B,r as u,f as S,c as h,a as l,u as T,h as $,w as f,b as a,i as z,A,e as _,m as E,t as w,F as k,s as p,x,_ as F}from"./app-EEW5rfl7.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNQNEmhQ.js";import{M as V}from"./Modal-DgqnacDg.js";import{_ as D}from"./MeasurementUnitForm.vue_vue_type_script_setup_true_lang-DpvcuUf7.js";import{_ as Y}from"./MeasurementUnitTable.vue_vue_type_script_setup_true_lang-YrtmD5Mo.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const I={class:"row"},P={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=B({__name:"MeasurementUnits",props:{measurementUnits:{}},setup(b){const g=[{title:"Dashboard",href:q().url},{title:"Measurement Units",href:"/measurement-units"}],c=u(!1),t=u(null),d=u(!1),o=u({}),n=u({show:!1,message:"",type:"success"}),s=S({name:"",is_active:!0}),m=()=>{s.name="",s.is_active=!0,o.value={},t.value=null,c.value=!1},r=(e,i="success")=>{n.value={show:!0,message:e,type:i},setTimeout(()=>{n.value.show=!1},3e3)},M=e=>{t.value=e,s.name=e.name,s.is_active=e.is_active,o.value={},c.value=!0},y=()=>{m(),c.value=!0},v=async()=>{d.value=!0,o.value={};try{t.value?(await p.put(`/measurement-units/${t.value.id}`,s),r("Measurement unit updated successfully!")):(await p.post("/measurement-units",s),r("Measurement unit created successfully!")),m(),x.reload()}catch(e){e.response?.status===422?(o.value=e.response.data.errors,r("Please fix the validation errors.","error")):(console.error("Error saving measurement unit:",e),r("An error occurred while saving the measurement unit.","error"))}finally{d.value=!1}},C=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the measurement unit "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await p.delete(`/measurement-units/${e.id}`),r("Measurement unit deleted successfully!"),x.reload()}catch(U){console.error("Error deleting measurement unit:",U),r("An error occurred while deleting the measurement unit.","error")}};return(e,i)=>(_(),h(k,null,[l(T($),{title:"Measurement Units Management"}),l(N,{breadcrumbs:g},{default:f(()=>[a("div",I,[a("div",P,[l(Y,{"measurement-units":b.measurementUnits,onEdit:M,onDelete:C},{"header-action":f(()=>[a("button",{onClick:y,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...i[0]||(i[0]=[a("span",{"data-feather":"plus",class:"me-1"},null,-1),A(" Add Measurement Unit ",-1)])])]),_:1},8,["measurement-units"]),l(V,{show:c.value,title:t.value?"Edit Measurement Unit":"Create Measurement Unit",loading:d.value,"submit-label":t.value?"Update Measurement Unit":"Create Measurement Unit",size:"sm",onClose:m,onSubmit:v},{default:f(()=>[l(D,{form:s,"editing-measurement-unit":t.value,errors:o.value,onSubmit:v,onCancel:m},null,8,["form","editing-measurement-unit","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),n.value.show?(_(),h("div",{key:0,class:E(["toast-notification",n.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[a("div",j,[a("span",G,w(n.value.type==="success"?"✅":"❌"),1),a("span",null,w(n.value.message),1)])],2)):z("",!0)]),_:1})],64))}}),Z=F(H,[["__scopeId","data-v-db13d755"]]);export{Z as default};
