import{i as G,c as J,g as Q,u as X,a as K}from"./useForwardPropsEmits-qZ14MR7j.js";import{P as N,c as D}from"./index-J8g_BZQe.js";import{f as F,g as v,d as x,y as q,e as h,w as C,D as M,u as i,J as R,A,c as O,i as Y,F as z,m as Z,R as ee,a as te,o as ae,Q as le,S,N as re}from"./app-0JMNLgL9.js";import{r as H}from"./index-BiwsPr4o.js";import{c as ne,u as ue,a as oe}from"./useForwardExpose-B9Jthie5.js";const ie=["INPUT","TEXTAREA"];function se(l,e,t,u={}){if(!e||u.enableIgnoredElement&&ie.includes(e.nodeName))return null;const{arrowKeyOptions:r="both",attributeName:o="[data-reka-collection-item]",itemsArray:s=[],loop:d=!0,dir:g="ltr",preventScroll:V=!0,focus:E=!1}=u,[b,f,P,w,k,B]=[l.key==="ArrowRight",l.key==="ArrowLeft",l.key==="ArrowUp",l.key==="ArrowDown",l.key==="Home",l.key==="End"],_=P||w,c=b||f;if(!k&&!B&&(!_&&!c||r==="vertical"&&c||r==="horizontal"&&_))return null;const m=s;if(!m.length)return null;V&&l.preventDefault();let y=null;return c||_?y=L(m,e,{goForward:_?w:g==="ltr"?b:f,loop:d}):k?y=m.at(0)||null:B&&(y=m.at(-1)||null),E&&y?.focus(),y}function L(l,e,t,u=l.length){if(--u===0)return null;const r=l.indexOf(e),o=t.goForward?r+1:r-1;if(!t.loop&&(o<0||o>=l.length))return null;const s=(o+l.length)%l.length,d=l[s];return d?d.hasAttribute("disabled")&&d.getAttribute("disabled")!=="false"?L(l,d,t,u):d:null}function de(l){const e=G({dir:F("ltr")});return v(()=>l?.value||e.dir?.value||"ltr")}function U(){const l=F(),e=v(()=>["#text","#comment"].includes(l.value?.$el.nodeName)?l.value?.$el.nextElementSibling:ne(l));return{primitiveElement:l,currentElement:e}}var pe=x({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(l){return(e,t)=>(h(),q(i(N),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:C(()=>[M(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),ce=pe,fe=x({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const e=l,{primitiveElement:t,currentElement:u}=U(),r=v(()=>e.checked??e.value);return R(r,(o,s)=>{if(!u.value)return;const d=u.value,g=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(g,"value").set;if(E&&o!==s){const b=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});E.call(d,o),d.dispatchEvent(b),d.dispatchEvent(f)}}),(o,s)=>(h(),q(ce,A({ref_key:"primitiveElement",ref:t},{...e,...o.$attrs},{as:"input"}),null,16))}}),T=fe,ve=x({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const e=l,t=v(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),u=v(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((r,o)=>typeof r=="object"?Object.entries(r).map(([s,d])=>({name:`${e.name}[${o}][${s}]`,value:d})):{name:`${e.name}[${o}]`,value:r}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([r,o])=>({name:`${e.name}[${r}]`,value:o})):[]);return(r,o)=>(h(),O(z,null,[Y(" We render single input if it's required "),t.value?(h(),q(T,A({key:r.name},{...e,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(h(!0),O(z,{key:1},Z(u.value,s=>(h(),q(T,A({key:s.name},{ref_for:!0},{...e,...r.$attrs},{name:s.name,value:s.value}),null,16,["name","value"]))),128))],2112))}}),me=ve;const[ye,he]=J("PinInputRoot");var ge=x({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(l,{emit:e}){const t=l,u=e,{mask:r,otp:o,placeholder:s,type:d,disabled:g,dir:V}=ee(t),{forwardRef:E}=ue(),b=de(V),f=oe(t,"modelValue",u,{defaultValue:t.defaultValue??[],passive:!0,deep:!0}),P=v(()=>Array.isArray(f.value)?[...f.value]:[]),w=F(new Set);function k(c){w.value.add(c)}const B=v(()=>t.type==="number"),_=v(()=>P.value.filter(m=>!!m||B.value&&m===0).length===w.value.size);return R(f,()=>{_.value&&u("complete",f.value)},{deep:!0}),he({modelValue:f,currentModelValue:P,mask:r,otp:o,placeholder:s,type:d,dir:b,disabled:g,isCompleted:_,inputElements:w,onInputElementChange:k,isNumericMode:B}),(c,m)=>(h(),q(i(N),A(c.$attrs,{ref:i(E),dir:i(b),"data-complete":_.value?"":void 0,"data-disabled":i(g)?"":void 0}),{default:C(()=>[M(c.$slots,"default",{modelValue:i(f)}),te(me,{id:c.id,as:"input",feature:"focusable",tabindex:"-1",value:P.value.join(""),name:c.name??"",disabled:i(g),required:c.required,onFocus:m[0]||(m[0]=y=>Array.from(w.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),be=ge,_e=x({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(l){const e=l,t=ye(),u=v(()=>Array.from(t.inputElements.value)),r=v(()=>t.currentModelValue.value[e.index]),o=v(()=>e.disabled||t.disabled.value),s=v(()=>t.otp.value),d=v(()=>t.mask.value),{primitiveElement:g,currentElement:V}=U();function E(a){const n=a.target;if((a.data?.length??0)>1){c(n.value);return}if(t.isNumericMode.value&&!/^\d*$/.test(n.value)){n.value=n.value.replace(/\D/g,"");return}n.value=a.data||n.value.slice(-1),y(e.index,n.value);const p=u.value[e.index+1];p&&p.focus()}function b(){const a=V.value;re(()=>{a&&!a.value&&(a.placeholder=t.placeholder.value)})}function f(a){se(a,Q(),void 0,{itemsArray:u.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function P(a){if(a.preventDefault(),a.target.value)y(e.index,"");else{const I=u.value[e.index-1];I&&(I.focus(),y(e.index-1,""))}}function w(a){a.key==="Delete"&&(a.preventDefault(),y(e.index,""))}function k(a){const n=a.target;n.setSelectionRange(1,1),n.value||(n.placeholder="")}function B(a){b()}function _(a){a.preventDefault();const n=a.clipboardData;if(!n)return;const p=n.getData("text");c(p)}function c(a){const n=[...t.currentModelValue.value],p=a.length>=u.value.length?0:e.index,I=Math.min(p+a.length,u.value.length);for(let $=p;$<I;$++){const W=u.value[$],j=a[$-p];t.isNumericMode.value&&!/^\d*$/.test(j)||(n[$]=j,W.focus())}t.modelValue.value=n,u.value[I]?.focus()}function m(a){let n=a.length-1;for(;n>=0&&a[n]==="";)a.pop(),n--;return a}function y(a,n){const p=[...t.currentModelValue.value];if(t.isNumericMode.value){const I=+n;n===""||isNaN(I)?delete p[a]:p[a]=I}else p[a]=n;t.modelValue.value=m(p)}return R(r,()=>{r.value||b()}),ae(()=>{t.onInputElementChange(V.value)}),le(()=>{t.inputElements?.value.delete(V.value)}),(a,n)=>(h(),q(i(N),{ref_key:"primitiveElement",ref:g,autocapitalize:"none",as:a.as,"as-child":a.asChild,autocomplete:s.value?"one-time-code":"false",type:d.value?"password":"text",inputmode:i(t).isNumericMode.value?"numeric":"text",pattern:i(t).isNumericMode.value?"[0-9]*":void 0,placeholder:i(t).placeholder.value,value:r.value,disabled:o.value,"data-disabled":o.value?"":void 0,"data-complete":i(t).isCompleted.value?"":void 0,"aria-label":`pin input ${a.index+1} of ${u.value.length}`,onInput:n[0]||(n[0]=p=>E(p)),onKeydown:[S(f,["left","right","up","down","home","end"]),S(P,["backspace"]),S(w,["delete"])],onFocus:k,onBlur:B,onPaste:_},{default:C(()=>[M(a.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),we=_e;const Pe=x({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(l,{emit:e}){const t=l,u=e,r=H(t,"class"),o=X(r,u);return(s,d)=>(h(),q(i(be),A({"data-slot":"pin-input"},i(o),{class:i(D)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",t.class)}),{default:C(()=>[M(s.$slots,"default")]),_:3},16,["class"]))}}),Be=x({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const e=l,t=H(e,"class"),u=K(t);return(r,o)=>(h(),q(i(N),A({"data-slot":"pin-input-group"},i(u),{class:i(D)("flex items-center",e.class)}),{default:C(()=>[M(r.$slots,"default")]),_:3},16,["class"]))}}),Ae=x({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const e=l,t=H(e,"class"),u=K(t);return(r,o)=>(h(),q(i(we),A({"data-slot":"pin-input-slot"},i(u),{class:i(D)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",e.class)}),null,16,["class"]))}});export{Pe as _,Be as a,Ae as b};
