import{d as C,c as l,a as e,w as g,b,v as E,n as y,F as w,r as S,t as n,e as N,f as V,o as r,g as z,h,i as F,j as _,u as U,k as q,l as L,m as $,p as x,q as D}from"./app-CtIQcBuM.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJZPRBDV.js";import{d as j}from"./index-BcgMG_W3.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CMWG4mbA.js";const G={class:"space-y-4"},P={class:"form-group"},H=["value"],J={key:0,class:"invalid-feedback"},K={class:"form-group"},O={key:0,class:"invalid-feedback"},Q={class:"form-group"},R={class:"form-check"},W=C({__name:"CityForm",props:{form:{},states:{},editingCity:{},errors:{}},emits:["submit","cancel"],setup(s,{emit:p}){return(m,t)=>(r(),l("div",G,[e("div",P,[t[4]||(t[4]=e("label",{for:"state_id",class:"form-label"}," State ",-1)),g(e("select",{id:"state_id","onUpdate:modelValue":t[0]||(t[0]=a=>s.form.state_id=a),class:y(["form-control",{"is-invalid":s.errors.state_id}]),required:""},[t[3]||(t[3]=e("option",{value:""},"Select a state",-1)),(r(!0),l(w,null,S(s.states,a=>(r(),l("option",{key:a.id,value:a.id},n(a.name)+" ("+n(a.code)+") ",9,H))),128))],2),[[E,s.form.state_id]]),s.errors.state_id?(r(),l("div",J,n(s.errors.state_id[0]),1)):b("",!0)]),e("div",K,[t[5]||(t[5]=e("label",{for:"name",class:"form-label"}," City Name ",-1)),g(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=a=>s.form.name=a),type:"text",class:y(["form-control",{"is-invalid":s.errors.name}]),placeholder:"Enter city name",required:""},null,2),[[N,s.form.name]]),s.errors.name?(r(),l("div",O,n(s.errors.name[0]),1)):b("",!0)]),e("div",Q,[e("div",R,[g(e("input",{id:"is_active","onUpdate:modelValue":t[2]||(t[2]=a=>s.form.is_active=a),type:"checkbox",class:"form-check-input"},null,512),[[V,s.form.is_active]]),t[6]||(t[6]=e("label",{for:"is_active",class:"form-check-label"}," Active ",-1))])])]))}}),X={class:"card mb-3"},Z={class:"card-body p-0"},ee={class:"table4 p-25 bg-white mb-30"},te={class:"table-responsive"},se={class:"table mb-0"},ae={class:"userDatatable-content"},ie={class:"d-flex align-items-center"},oe={class:"userDatatable-inline-title"},le={href:"#",class:"text-dark fw-500"},ne={class:"userDatatable-content"},re={class:"bg-opacity-primary color-primary rounded-pill userDatatable-content-status active"},de={class:"userDatatable-content"},ce={class:"userDatatable-content"},ue={class:"userDatatable-content"},me={class:"d-flex align-items-center gap-2"},ve=["onClick"],be=["onClick"],fe={key:0,class:"text-center py-5"},he=C({__name:"CityTable",props:{cities:{}},emits:["edit","delete"],setup(s,{emit:p}){const m=p,t=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return z(()=>{typeof window<"u"&&window.feather&&window.feather.replace()}),(a,d)=>(r(),l("div",X,[d[2]||(d[2]=e("div",{class:"card-header color-dark fw-500"}," Cities Management ",-1)),e("div",Z,[e("div",ee,[e("div",te,[e("table",se,[d[0]||(d[0]=e("thead",null,[e("tr",{class:"userDatatable-header"},[e("th",null,[e("span",{class:"userDatatable-title"},"City Name")]),e("th",null,[e("span",{class:"userDatatable-title"},"State")]),e("th",null,[e("span",{class:"userDatatable-title"},"Status")]),e("th",null,[e("span",{class:"userDatatable-title"},"Created")]),e("th",null,[e("span",{class:"userDatatable-title"},"Actions")])])],-1)),e("tbody",null,[(r(!0),l(w,null,S(s.cities,o=>(r(),l("tr",{key:o.id},[e("td",null,[e("div",ae,[e("div",ie,[e("div",oe,[e("a",le,n(o.name),1)])])])]),e("td",null,[e("div",ne,[e("span",re,n(o.state.name)+" ("+n(o.state.code)+") ",1)])]),e("td",null,[e("div",de,[e("span",{class:y(["rounded-pill userDatatable-content-status",o.is_active?"bg-opacity-success color-success active":"bg-opacity-danger color-danger"])},n(o.is_active?"Active":"Inactive"),3)])]),e("td",null,[e("div",ce,n(t(o.created_at)),1)]),e("td",null,[e("div",ue,[e("div",me,[e("button",{onClick:c=>m("edit",o),class:"btn btn-sm btn-outline-primary",title:"Edit City",style:{padding:"4px 8px","min-width":"32px",height:"32px"}}," ‚úèÔ∏è ",8,ve),e("button",{onClick:c=>m("delete",o),class:"btn btn-sm btn-outline-danger",title:"Delete City",style:{padding:"4px 8px","min-width":"32px",height:"32px"}}," üóëÔ∏è ",8,be)])])])]))),128))])])])])]),s.cities.length===0?(r(),l("div",fe,[...d[1]||(d[1]=[e("div",{class:"mb-3"},[e("span",{style:{"font-size":"48px"}},"üèôÔ∏è")],-1),e("h6",{class:"text-muted"},"No cities found",-1),e("p",{class:"text-muted mb-0"},"Get started by creating a new city.",-1)])])):b("",!0)]))}}),pe={class:"row"},_e={class:"col-12"},ye={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-labelledby":"cityModalLabel","aria-hidden":"false",style:{"background-color":"rgba(0,0,0,0.5)"}},ge={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},xe={class:"modal-content"},Ce={class:"modal-header"},we={class:"modal-title",id:"cityModalLabel"},ke={class:"modal-body"},$e={class:"modal-footer"},De=["disabled"],Se={key:0,class:"spinner-border spinner-border-sm me-1"},Me={class:"d-flex align-items-center"},Be={class:"me-2",style:{"font-size":"18px"}},Te=C({__name:"Cities",props:{cities:{},states:{}},setup(s){const p=[{title:"Dashboard",href:j().url},{title:"Cities",href:"/cities"}],m=h(!1),t=h(null),a=h(!1),d=h({}),o=h({show:!1,message:"",type:"success"}),c=F({name:"",state_id:"",is_active:!0}),f=()=>{c.name="",c.state_id="",c.is_active=!0,d.value={},t.value=null,m.value=!1},v=(i,u="success")=>{o.value={show:!0,message:i,type:u},setTimeout(()=>{o.value.show=!1},3e3)},M=i=>{t.value=i,c.name=i.name,c.state_id=i.state_id.toString(),c.is_active=i.is_active,d.value={},m.value=!0},B=()=>{f(),m.value=!0},k=async()=>{a.value=!0,d.value={};try{const i={...c,state_id:parseInt(c.state_id)};t.value?(await x.put(`/cities/${t.value.id}`,i),v("City updated successfully!")):(await x.post("/cities",i),v("City created successfully!")),f(),D.reload()}catch(i){i.response?.status===422?(d.value=i.response.data.errors,v("Please fix the validation errors.","error")):(console.error("Error saving city:",i),v("An error occurred while saving the city.","error"))}finally{a.value=!1}},T=async i=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the city "${i.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await x.delete(`/cities/${i.id}`),v("City deleted successfully!"),D.reload()}catch(A){console.error("Error deleting city:",A),v("An error occurred while deleting the city.","error")}};return(i,u)=>(r(),l(w,null,[_(U(q),{title:"Cities Management"}),_(I,{breadcrumbs:p},{default:L(()=>[e("div",pe,[e("div",_e,[e("div",{class:"d-flex justify-content-between align-items-center mb-30 mt-4"},[u[1]||(u[1]=e("div",null,[e("h4",{class:"color-dark fw-500"},"Cities Management"),e("p",{class:"text-muted mb-0"},"Manage cities and their states")],-1)),e("button",{onClick:B,class:"btn btn-primary btn-default btn-squared text-capitalize lh-normal px-50 py-15"},[...u[0]||(u[0]=[e("span",{"data-feather":"plus",class:"me-1"},null,-1),$(" Add City ",-1)])])]),_(he,{cities:s.cities,onEdit:M,onDelete:T},null,8,["cities"]),m.value?(r(),l("div",ye,[e("div",ge,[e("div",xe,[e("div",Ce,[e("h5",we,n(t.value?"Edit City":"Create City"),1),e("button",{type:"button",class:"btn-close",onClick:f,"aria-label":"Close"},[...u[2]||(u[2]=[e("span",{"aria-hidden":"true"},"√ó",-1)])])]),e("div",ke,[_(W,{form:c,states:s.states,"editing-city":t.value,errors:d.value,onSubmit:k,onCancel:f},null,8,["form","states","editing-city","errors"])]),e("div",$e,[e("button",{type:"button",class:"btn btn-secondary",onClick:f}," Cancel "),e("button",{type:"button",class:"btn btn-primary",onClick:k,disabled:a.value},[a.value?(r(),l("span",Se)):b("",!0),$(" "+n(t.value?"Update City":"Create City"),1)],8,De)])])])])):b("",!0)])]),o.value.show?(r(),l("div",{key:0,class:y(["toast-notification",o.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[e("div",Me,[e("span",Be,n(o.value.type==="success"?"‚úÖ":"‚ùå"),1),e("span",null,n(o.value.message),1)])],2)):b("",!0)]),_:1})],64))}}),Ue=Y(Te,[["__scopeId","data-v-e08f8253"]]);export{Ue as default};
