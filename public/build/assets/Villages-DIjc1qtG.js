import{d as z,f as d,r as T,c as m,a as p,u as $,h as E,w as y,b as t,i as g,q as x,e as _,t as v,n as A,F as D,s as f,I as w,_ as F}from"./app-0JMNLgL9.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-B_cPmPuj.js";import{_ as N}from"./VillageForm.vue_vue_type_script_setup_true_lang-u4g3nDug.js";import{_ as M}from"./VillageTable.vue_vue_type_script_setup_true_lang-Bw7Izxlm.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const L={class:"row"},Y={class:"col-12"},P={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-labelledby":"villageModalLabel","aria-hidden":"false",style:{"background-color":"rgba(0,0,0,0.5)"}},U={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},j={class:"modal-content"},G={class:"modal-header py-2 px-3"},H={class:"modal-title mb-0",id:"villageModalLabel",style:{"font-size":"16px","font-weight":"600"}},J={class:"modal-body py-3 px-3"},K={class:"modal-footer py-2 px-3"},O=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm me-1"},R={class:"d-flex align-items-center"},W={class:"me-2",style:{"font-size":"18px"}},X=z({__name:"Villages",props:{villages:{},districts:{}},setup(h){const V=[{title:"Dashboard",href:q().url},{title:"Villages",href:"/villages"}],c=d(!1),s=d(null),u=d(!1),r=d({}),o=d({show:!1,message:"",type:"success"}),a=T({name:"",district_id:"",taluka_id:"",is_active:!0}),n=()=>{a.name="",a.district_id="",a.taluka_id="",a.is_active=!0,r.value={},s.value=null,c.value=!1},i=(e,l="success")=>{o.value={show:!0,message:e,type:l},setTimeout(()=>{o.value.show=!1},3e3)},C=e=>{s.value=e,a.name=e.name,a.district_id=e.district_id.toString(),a.taluka_id=e.taluka_id.toString(),a.is_active=e.is_active,r.value={},c.value=!0},k=()=>{n(),c.value=!0},b=async()=>{u.value=!0,r.value={};try{const e={...a,district_id:parseInt(a.district_id),taluka_id:parseInt(a.taluka_id)};s.value?(await f.put(`/villages/${s.value.id}`,e),i("Village updated successfully!")):(await f.post("/villages",e),i("Village created successfully!")),n(),w.reload()}catch(e){e.response?.status===422?(r.value=e.response.data.errors,i("Please fix the validation errors.","error")):(console.error("Error saving village:",e),i("An error occurred while saving the village.","error"))}finally{u.value=!1}},B=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the village "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await f.delete(`/villages/${e.id}`),i("Village deleted successfully!"),w.reload()}catch(S){console.error("Error deleting village:",S),i("An error occurred while deleting the village.","error")}};return(e,l)=>(_(),m(D,null,[p($(E),{title:"Villages Management"}),p(I,{breadcrumbs:V},{default:y(()=>[t("div",L,[t("div",Y,[p(M,{villages:h.villages,onEdit:C,onDelete:B},{"header-action":y(()=>[t("button",{onClick:k,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...l[0]||(l[0]=[t("span",{"data-feather":"plus",class:"me-1"},null,-1),x(" Add Village ",-1)])])]),_:1},8,["villages"]),c.value?(_(),m("div",P,[t("div",U,[t("div",j,[t("div",G,[t("h5",H,v(s.value?"Edit Village":"Create Village"),1),t("button",{type:"button",class:"btn-close",onClick:n,"aria-label":"Close"},[...l[1]||(l[1]=[t("span",{"aria-hidden":"true"},"×",-1)])])]),t("div",J,[p(N,{form:a,districts:h.districts,"editing-village":s.value,errors:r.value,onSubmit:b,onCancel:n},null,8,["form","districts","editing-village","errors"])]),t("div",K,[t("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:n,style:{"font-size":"13px"}}," Cancel "),t("button",{type:"button",class:"btn btn-primary btn-sm",onClick:b,disabled:u.value,style:{"font-size":"13px"}},[u.value?(_(),m("span",Q)):g("",!0),x(" "+v(s.value?"Update Village":"Create Village"),1)],8,O)])])])])):g("",!0)])]),o.value.show?(_(),m("div",{key:0,class:A(["toast-notification",o.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[t("div",R,[t("span",W,v(o.value.type==="success"?"✅":"❌"),1),t("span",null,v(o.value.message),1)])],2)):g("",!0)]),_:1})],64))}}),ie=F(X,[["__scopeId","data-v-2c7cec6a"]]);export{ie as default};
