import{d as B,r as n,f as S,c as _,a as c,u as T,h as $,w as f,b as s,i as z,A,e as h,m as E,t as w,F as D,s as g,x,_ as F}from"./app-OBNlIbYR.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bs9yToL_.js";import{M as I}from"./Modal-BtALBVmO.js";import{_ as M}from"./VillageForm.vue_vue_type_script_setup_true_lang-D3KkN8mk.js";import{_ as Y}from"./VillageTable.vue_vue_type_script_setup_true_lang-Eu06aVgu.js";import{d as q}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const P={class:"row"},U={class:"col-12"},j={class:"d-flex align-items-center"},G={class:"me-2",style:{"font-size":"18px"}},H=B({__name:"Villages",props:{villages:{},districts:{}},setup(v){const b=[{title:"Dashboard",href:q().url},{title:"Villages",href:"/villages"}],d=n(!1),a=n(null),m=n(!1),r=n({}),l=n({show:!1,message:"",type:"success"}),t=S({name:"",district_id:"",taluka_id:"",is_active:!0}),u=()=>{t.name="",t.district_id="",t.taluka_id="",t.is_active=!0,r.value={},a.value=null,d.value=!1},i=(e,o="success")=>{l.value={show:!0,message:e,type:o},setTimeout(()=>{l.value.show=!1},3e3)},V=e=>{a.value=e,t.name=e.name,t.district_id=e.district_id.toString(),t.taluka_id=e.taluka_id.toString(),t.is_active=e.is_active,r.value={},d.value=!0},y=()=>{u(),d.value=!0},p=async()=>{m.value=!0,r.value={};try{const e={...t,district_id:parseInt(t.district_id),taluka_id:parseInt(t.taluka_id)};a.value?(await g.put(`/villages/${a.value.id}`,e),i("Village updated successfully!")):(await g.post("/villages",e),i("Village created successfully!")),u(),x.reload()}catch(e){e.response?.status===422?(r.value=e.response.data.errors,i("Please fix the validation errors.","error")):(console.error("Error saving village:",e),i("An error occurred while saving the village.","error"))}finally{m.value=!1}},C=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the village "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await g.delete(`/villages/${e.id}`),i("Village deleted successfully!"),x.reload()}catch(k){console.error("Error deleting village:",k),i("An error occurred while deleting the village.","error")}};return(e,o)=>(h(),_(D,null,[c(T($),{title:"Villages Management"}),c(N,{breadcrumbs:b},{default:f(()=>[s("div",P,[s("div",U,[c(Y,{villages:v.villages,onEdit:V,onDelete:C},{"header-action":f(()=>[s("button",{onClick:y,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...o[0]||(o[0]=[s("span",{"data-feather":"plus",class:"me-1"},null,-1),A(" Add Village ",-1)])])]),_:1},8,["villages"]),c(I,{show:d.value,title:a.value?"Edit Village":"Create Village",loading:m.value,"submit-label":a.value?"Update Village":"Create Village",size:"sm",onClose:u,onSubmit:p},{default:f(()=>[c(M,{form:t,districts:v.districts,"editing-village":a.value,errors:r.value,onSubmit:p,onCancel:u},null,8,["form","districts","editing-village","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),l.value.show?(h(),_("div",{key:0,class:E(["toast-notification",l.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[s("div",j,[s("span",G,w(l.value.type==="success"?"✅":"❌"),1),s("span",null,w(l.value.message),1)])],2)):z("",!0)]),_:1})],64))}}),Z=F(H,[["__scopeId","data-v-86f34756"]]);export{Z as default};
