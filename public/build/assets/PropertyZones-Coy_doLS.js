import{d as C,r as i,f as B,c as v,a as c,u as S,h as T,w as m,b as r,i as $,A,e as h,m as E,t as _,F as k,s as f,x as w,_ as F}from"./app-IPI9ePqY.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BVvOMUdG.js";import{M as V}from"./Modal-BFQUYgQa.js";import{_ as D}from"./PropertyZoneForm.vue_vue_type_script_setup_true_lang-Kj473Tod.js";import{_ as M}from"./PropertyZoneTable.vue_vue_type_script_setup_true_lang-BzhEDGI8.js";import{d as Y}from"./index-BcgMG_W3.js";import"./index-CMWG4mbA.js";const q={class:"row"},I={class:"col-12"},U={class:"d-flex align-items-center"},j={class:"me-2",style:{"font-size":"18px"}},G=C({__name:"PropertyZones",props:{propertyZones:{}},setup(x){const b=[{title:"Dashboard",href:Y().url},{title:"Property Zones",href:"/property-zones"}],u=i(!1),t=i(null),d=i(!1),n=i({}),s=i({show:!1,message:"",type:"success"}),o=B({name:"",is_active:!0}),p=()=>{o.name="",o.is_active=!0,n.value={},t.value=null,u.value=!1},a=(e,l="success")=>{s.value={show:!0,message:e,type:l},setTimeout(()=>{s.value.show=!1},3e3)},g=e=>{t.value=e,o.name=e.name,o.is_active=e.is_active,n.value={},u.value=!0},z=()=>{p(),u.value=!0},y=async()=>{d.value=!0,n.value={};try{t.value?(await f.put(`/property-zones/${t.value.id}`,o),a("Property Zone updated successfully!")):(await f.post("/property-zones",o),a("Property Zone created successfully!")),p(),w.reload()}catch(e){e.response?.status===422?(n.value=e.response.data.errors,a("Please fix the validation errors.","error")):(console.error("Error saving property zone:",e),a("An error occurred while saving the property zone.","error"))}finally{d.value=!1}},P=async e=>{if((await window.Swal.fire({title:"Are you sure?",text:`You are about to delete the property zone "${e.name}". This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{await f.delete(`/property-zones/${e.id}`),a("Property Zone deleted successfully!"),w.reload()}catch(Z){console.error("Error deleting property zone:",Z),a("An error occurred while deleting the property zone.","error")}};return(e,l)=>(h(),v(k,null,[c(S(T),{title:"Property Zones Management"}),c(N,{breadcrumbs:b},{default:m(()=>[r("div",q,[r("div",I,[c(M,{"property-zones":x.propertyZones,onEdit:g,onDelete:P},{"header-action":m(()=>[r("button",{onClick:z,class:"btn btn-primary btn-sm btn-default btn-squared text-capitalize lh-normal px-3 py-2"},[...l[0]||(l[0]=[r("span",{"data-feather":"plus",class:"me-1"},null,-1),A(" Add Property Zone ",-1)])])]),_:1},8,["property-zones"]),c(V,{show:u.value,title:t.value?"Edit Property Zone":"Create Property Zone",loading:d.value,"submit-label":t.value?"Update Property Zone":"Create Property Zone",size:"sm",onClose:p,onSubmit:y},{default:m(()=>[c(D,{form:o,"editing-property-zone":t.value,errors:n.value,onSubmit:y,onCancel:p},null,8,["form","editing-property-zone","errors"])]),_:1},8,["show","title","loading","submit-label"])])]),s.value.show?(h(),v("div",{key:0,class:E(["toast-notification",s.value.type==="success"?"toast-success":"toast-error"]),style:{position:"fixed",top:"20px",right:"20px","z-index":"9999","min-width":"300px",padding:"12px 16px","border-radius":"8px",color:"white","font-weight":"500","box-shadow":"0 4px 12px rgba(0,0,0,0.15)"}},[r("div",U,[r("span",j,_(s.value.type==="success"?"✅":"❌"),1),r("span",null,_(s.value.message),1)])],2)):$("",!0)]),_:1})],64))}}),X=F(G,[["__scopeId","data-v-19952dad"]]);export{X as default};
